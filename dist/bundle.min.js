var PLOTSCAPE=(()=>{const i={};const r=[null];function t(t,e,s){i[t]={dependencies:e,factory:s};r[0]=t}t("require",["exports"],t=>{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:t=>o(t)})});var n=this&&this.__createBinding||(Object.create?function(t,e,s,i){if(i===undefined)i=s;var r=Object.getOwnPropertyDescriptor(e,s);if(!r||("get"in r?!e.__esModule:r.writable||r.configurable)){r={enumerable:true,get:function(){return e[s]}}}Object.defineProperty(t,i,r)}:function(t,e,s,i){if(i===undefined)i=s;t[i]=e[s]});var h=this&&this.__exportStar||function(t,e){for(var s in t)if(s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s))n(e,t,s)};t("scales/Scale",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scale=void 0;class s{constructor(t,e=1,s=.1){this.setLength=t=>{this.lengthOriginal=t;this.offsetOriginal=this.direction===-1?t:0};this.registerData=t=>{this.data=t;return this};this.pctToUnits=t=>{const{length:e,offset:s,direction:i}=this;return typeof t==="number"?s+i*e*t:t.map(t=>s+i*e*t)};this.unitsToPct=t=>{const{length:e}=this;return typeof t==="number"?t/e:t.map(t=>t/e)};this.dataToPlot=t=>{};this.lengthOriginal=t;this.offsetOriginal=this.direction===-1?t:0;this.span=1;this.direction=e;this.expand=s}get length(){return this.lengthOriginal*this.span}get offset(){return this.offsetOriginal}}e.Scale=s});t("scales/ScaleContinuous",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleContinuous=void 0;class i extends s.Scale{constructor(t,e=1,s=false,i=.1){super(t,e,i);this.data=[];this.registerData=t=>{this.data=this.zero?[].concat([0],t):t;return this};this.inRange=t=>{return t>=this.dataMin&&t<=this.dataMax};this.pctToData=t=>{if(t===null)return null;const{dataMin:e,range:s}=this;if(typeof t==="number")return e+t*s;return t.map(t=>{if(t===null)return null;return e+t*s})};this.dataToPct=t=>{if(t===null)return null;const{dataMin:e,range:s}=this;if(typeof t==="number")return(t-e)/s;return t.map(t=>{if(t===null)return null;return(t-e)/s})};this.dataToUnits=t=>{if(t===null)return null;const{dataMin:e,length:s,offset:i,direction:r,range:n}=this;if(typeof t==="number")return i+r*s*(t-e)/n;return t.map(t=>{if(t===null)return null;return i+r*s*((t-e)/n)})};this.unitsToData=t=>{if(t===null)return null;const{dataMin:e,length:s,offset:i,direction:r,range:n}=this;if(typeof t==="number")return e+r*n*(t-i)/s;return t.map(t=>{if(t===null)return null;return e+r*n*((t-i)/s)})};this.zero=s}get dataMin(){const{data:t,expand:e}=this;return this.zero?0:Math.min(...t)-e*(Math.max(...t)-Math.min(...t))}get dataMax(){const{data:t,expand:e}=this;return Math.max(...t)+e*(Math.max(...t)-Math.min(...t))}get range(){return this.dataMax-this.dataMin}}e.ScaleContinuous=i});t("scales/ScaleDiscrete",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleDiscrete=void 0;class i extends s.Scale{constructor(t,e=1,s=.1){super(t,e,s);this.toString=t=>{if(typeof t==="string"||typeof t[0]==="string")return t;return t.length?t.map(t=>`${t}`):`${t}`};this.registerData=t=>{this.data=t;const e=Array.from(new Set([...t]));this.values=typeof e[0]==="number"?e.sort((t,e)=>t-e):e.sort();this.positions=Array.from(Array(this.values.length),(t,e)=>(e+1)/(this.values.length+1));return this};this.dataToUnits=t=>{if(t==null)return null;const{values:e,length:s,direction:i,positions:r,offset:n}=this;const a=this.toString(t);const l=this.toString(e);if(typeof a==="string"){return l.indexOf(a)!==-1?n+i*s*r[l.indexOf(a)]:null}return a.map(t=>l.indexOf(t)!==-1?n+i*s*r[l.indexOf(t)]:null)};this.values=[]}}e.ScaleDiscrete=i});t("scales/AreaScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AreaScaleContinuous=void 0;class i extends s.ScaleContinuous{constructor(t,e=1,s=false){super(t,e,s);this.dataToPlot=t=>{const e=this.dataToUnits(t);return typeof e==="number"?Math.sqrt(e):e.map(t=>Math.sqrt(t))}}get dataMin(){return 0}}e.AreaScaleContinuous=i});t("scales/LengthScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LengthScaleContinuous=void 0;class i extends s.ScaleContinuous{constructor(t,e=1,s=false){super(t,e,s);this.dataToPlot=t=>{const e=this.dataToUnits(t);return e}}get dataMin(){return 0}}e.LengthScaleContinuous=i});t("scales/XYScaleDiscrete",["require","exports","scales/ScaleDiscrete"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleDiscrete=void 0;class i extends s.ScaleDiscrete{constructor(t,e=1,s=.1,i={lower:.2,upper:.1}){super(t,e,s);this.dataToPlot=t=>{return this.dataToUnits(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=i;this.span=1-i.lower-i.upper}get offset(){return this.offsetOriginal+this.direction*this.lengthOriginal*this.margins.lower}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}get intervalWidth(){return Math.abs(this.dataToPlot(this.values[0])-this.dataToPlot(this.values[1]))}}e.XYScaleDiscrete=i});t("scales/XYScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleContinuous=void 0;class i extends s.ScaleContinuous{constructor(t,e=1,s=false,i=.1,r={lower:.2,upper:.1}){super(t,e,s,i);this.dataToPlot=t=>{return this.dataToUnits(t)};this.plotToData=t=>{return this.unitsToData(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=r;this.span=1-r.lower-r.upper}get offset(){return this.offsetOriginal+this.direction*this.lengthOriginal*this.margins.lower}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}}e.XYScaleContinuous=i});t("scales/scales",["require","exports","scales/Scale","scales/ScaleContinuous","scales/ScaleDiscrete","scales/AreaScaleContinuous","scales/LengthScaleContinuous","scales/XYScaleDiscrete","scales/XYScaleContinuous"],function(t,e,s,i,r,n,a,l,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e);h(a,e);h(l,e);h(o,e)});t("functions",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.timeExecution=e.rectOverlap=e.pointInRect=e.uniqueRowIds=e.uniqueRows=e.arrTranspose=e.arrEqual=e.toPretty=e.prettyBreaks=e.accessIndexed=e.accessUnpeel=e.accessDeep=e.throttle=e.unique=e.match=e.which=e.gatedMultiply=e.quantile=e.bin=e.capitalize=e.max=e.min=e.mean=e.sum=e.length=e.identity=e.isNumeric=void 0;const r=t=>{return JSON.parse(JSON.stringify(t))};const s=t=>typeof t[0]==="number";e.isNumeric=s;const i=t=>t;e.identity=i;const n=t=>t.length?t.length:0;e.length=n;const a=t=>{if(!t.length)return null;return t.reduce((t,e)=>t+e,0)};e.sum=a;const l=t=>t.length?a(t)/t.length:null;e.mean=l;const o=t=>t.length?Math.min(...t):null;e.min=o;const h=t=>t.length?Math.max(...t):null;e.max=h;const c=t=>{return typeof t==="string"?t.charAt(0).toUpperCase()+t.slice(1):t.map(t=>t.charAt(0).toUpperCase()+t.slice(1))};e.capitalize=c;const u=(s,t=5)=>{if(!s.length)return null;const e=Math.max(...s)-Math.min(...s);const i=e/t;const r=Array.from(Array(t+1),(t,e)=>Math.min(...s)+e*i);const n=r.map((t,e)=>(t+r[e-1])/2);r.reverse();n.shift();return s.map(e=>r.findIndex(t=>e>=t)).map(t=>t===0?r.length-2:r.length-t-1).map(t=>n[t])};e.bin=u;const d=(t,e)=>{if(!t.length)return null;const s=t.sort((t,e)=>t-e);if(typeof e==="number"){const i=e*(s.length-1);const{lwr:r,uppr:n}={lwr:Math.floor(i),uppr:Math.ceil(i)};return s[r]+i%1*(s[n]-s[r])}const i=e.map(t=>t*(s.length-1));const{lwr:r,uppr:n}={lwr:i.map(t=>Math.floor(t)),uppr:i.map(t=>Math.ceil(t))};return i.map((t,e)=>s[r[e]]+t%1*(s[n[e]]-s[r[e]]))};e.quantile=d;const p=(t,e,s)=>{if(t*e<s.min)return s.min;if(t*e>s.max)return s.max;return t*e};e.gatedMultiply=p;const g=(t,s)=>{return t.map((t,e)=>t===s?e:NaN).filter(t=>!isNaN(t))};e.which=g;const f=(t,e)=>{return t.map(t=>e.indexOf(t))};e.match=f;const y=t=>{const e=Array.from(new Set(t));return e.length===1?e[0]:e};e.unique=y;const m=(t,...e)=>{return e.reduce((t,e)=>t&&t[e],t)};e.accessDeep=m;const x=(e,...s)=>{var i;const r=s.pop();let n;for(let t=s.length;t>=0;t--){n=(i=m(e,...s,r))!==null&&i!==void 0?i:null;if(n)break;s.pop()}return n};e.accessUnpeel=x;const w=(e,s)=>{const i=r(e);Object.keys(e).forEach(t=>i[t]=e[t][s]);return i};e.accessIndexed=w;const b=(s,i)=>{let r=0;return(...t)=>{const e=(new Date).getTime();if(e-r<i)return;r=e;s(...t)}};e.throttle=b;const M=(t,e=4)=>{const[s,i]=[Math.min(...t),Math.max(...t)];const r=i-s;const n=r/e;const a=Math.floor(Math.log10(n));const l=[1,2,4,5,6,8,10].map(t=>Math.pow(t-n/Math.pow(10,a),2));const o=Math.pow(10,a)*[1,2,4,5,6,8,10][l.indexOf(Math.min(...l))];const h=Math.abs(a)>4;const c=Math.round(s/o)*o;const u=Math.round(i/o)*o;const d=Array.from(Array(Math.floor((u-c)/o-1)),(t,e)=>c+(e+1)*o);const p=[c,...d,u].map(t=>parseFloat(t.toFixed(4)));return h?p.map(t=>t.toExponential()):p};e.prettyBreaks=M;const v=(e,t=5)=>{const s=M(e,t);let i=e.length;const r=Array(e.length);while(i--){const n=s.map(t=>Math.pow(t-e[i],2));r[i]=s[n.indexOf(Math.min(...n))]}return r};e.toPretty=v;const P=(t,s)=>{return t.length==s.length&&t.every((t,e)=>t===s[e])};e.arrEqual=P;const k=s=>{return s[0].map((t,e)=>s.map(t=>t[e]))};e.arrTranspose=k;const S=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=y(t);const i=e.map(s=>t.flatMap((t,e)=>t===s?e:[]));const r=i.map(e=>{return s.map(t=>t[e[0]])});return{values:r,indices:i}};e.uniqueRows=S;const A=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=y(t);return t.map(t=>e.indexOf(t))};e.uniqueRowIds=A;const C=(t,e)=>{return(t[0]-e[0][0])*(t[0]-e[1][0])<0&&(t[1]-e[0][1])*(t[1]-e[1][1])<0};e.pointInRect=C;const O=(t,s)=>{const[e,i]=[0,1].map(e=>t.map(t=>t[e]));const[r,n]=[0,1].map(e=>s.map(t=>t[e]));return!(Math.max(...e)<Math.min(...r)||Math.min(...e)>Math.max(...r)||Math.max(...i)<Math.min(...n)||Math.min(...i)>Math.max(...n))};e.rectOverlap=O;const _=(t,s)=>{return t.map((t,e)=>t-s[e])};const q=(s,i,e)=>{const t=Math.min(...i.map(t=>t[0]));const r=Math.min(...i.map(t=>t[1]));const n=Math.max(...i.map(t=>t[0]));const a=Math.max(...i.map(t=>t[1]));if(s[0]<t||s[0]>n||s[1]<r||s[1]>a){return false}const l=Array.from(Array(i.length),(t,e)=>e);const o=Array.from(Array(i.length),(t,e)=>e);o.shift();o.push(0);const h=l.map((t,e)=>_(i[o[e]],i[t]));const c=i.map((t,e)=>{return[(s[1]-t[1])/h[e][1],(s[1]-t[1])/h[e][1]*h[e][0]+t[0]-s[0]]});const u=c.map(t=>t[1]).filter(t=>t>0&&t<e);return u.length%2===1};const H=t=>{const e=performance.now();t();const s=performance.now();return s-e};e.timeExecution=H});t("globalparameters",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.globalParameters=void 0;e.globalParameters={plot:{backgroundColour:`#f2efde`},reps:{colour:[`#cccccc`,`#1b9e77`,`#d95f02`,`#7570b3`,`#ffffffCC`],strokeColour:[null,null,null,null,`#000000`],strokeWidth:[null,null,null,null,1],radius:[1,1,1,1,1],alpha:[1,1,1,1,1]}}});t("plot/GraphicLayer",["require","exports","globalparameters"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicLayer=void 0;class i{constructor(t,e){this.resize=()=>{this.canvas.style.width=`${this.width}px`;this.canvas.style.height=`${this.height}px`;this.canvas.width=Math.ceil(this.width*this.scaleFactor);this.canvas.height=Math.ceil(this.height*this.scaleFactor);this.context.scale(this.scaleFactor,this.scaleFactor)};this.dropMissing=(...t)=>{let e=t[0].length;while(e--){if(t.map(t=>t[e]).some(t=>t===null||t<0))t.map(t=>t.splice(e,1))}return t};this.toAlpha=(t,e)=>{if(e===1)return t;let s=Math.floor(e*255).toString(16).toUpperCase();if(s.length<2)s="0"+s;return t+s};this.drawClear=()=>{const t=this.context;t.save();t.clearRect(0,0,this.width,this.height);t.restore()};this.drawBackground=()=>{const t=this.context;t.save();t.fillStyle=s.globalParameters.plot.backgroundColour;t.fillRect(0,0,this.width,this.height);t.restore()};this.drawBarsV=(t,e,s,i,r)=>{const[n,a,l,o]=this.dropMissing(t,e,s,i);const{colour:h,strokeColour:c,strokeWidth:u,alpha:d}=r;const p=this.context;p.save();p.fillStyle=this.toAlpha(h,d);p.strokeStyle=c;p.lineWidth=u;n.forEach((t,e)=>{if(h)p.fillRect(t-o[e]/2,a[e],o[e],l[e]-a[e]);if(c)p.strokeRect(t-o[e]/2,a[e],o[e],l[e]-a[e])});p.restore()};this.drawPoints=(t,s,i,e)=>{const r=this.context;const{colour:n,strokeColour:a,strokeWidth:l,alpha:o}=e;r.save();r.fillStyle=this.toAlpha(n,o);r.strokeStyle=a;r.lineWidth=l;t.forEach((t,e)=>{r.beginPath();r.arc(t,s[e],i[e]/2,0,Math.PI*2);if(a)r.stroke();if(n)r.fill()});r.restore()};this.drawRectsHW=(t,s,i,r,e)=>{const n=this.context;const{colour:a,strokeColour:l,strokeWidth:o,alpha:h}=e;n.save();n.fillStyle=this.toAlpha(a,h);n.strokeStyle=l;n.lineWidth=o;t.forEach((t,e)=>{if(a)n.fillRect(t-r[e]/2,s[e]-i[e]/2,i[e],r[e]);if(l)n.strokeRect(t-r[e]/2,s[e]-i[e]/2,i[e],r[e])});n.restore()};this.drawLine=(t,s,e="black")=>{const i=this.context;i.save();i.beginPath();i.strokeStyle=e;i.moveTo(t[0],s[0]);t.shift();s.shift();t.forEach((t,e)=>{i.lineTo(t,s[e])});i.stroke();i.restore()};this.drawText=(t,s,i,e=20,r)=>{const n=this.context;n.save();n.font=`${e}px Times New Roman`;t.forEach((t,e)=>{n.translate(t,s[e]);if(r)n.rotate(r/360*Math.PI*2);n.fillText(i[e],0,0);n.translate(-t,-s[e])});n.restore()};this.drawDim=(t="rgba(120, 120, 120, 0.1)")=>{const e=this.context;e.fillStyle=t;e.fillRect(0,0,this.width,this.height)};this.drawWindow=(t,e,s="rgba(0, 0, 0, 0.25)")=>{const i=this.context;i.save();i.strokeStyle=s;i.setLineDash([5,5]);i.clearRect(t[0],t[1],e[0]-t[0],e[1]-t[1]);i.restore()};this.globals=t;this.dimensions=e;this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resize()}get width(){if(this.dimensions)return this.dimensions.width;return this.globals.size.plotWidth}get height(){if(this.dimensions)return this.dimensions.height;return this.globals.size.plotHeight}get scaleFactor(){return this.globals.size.scaleFactor}}e.GraphicLayer=i});t("DataFrame",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DataFrame=void 0;class s{constructor(e){Object.keys(e).forEach(t=>this[t]=e[t])}get _indicator(){return Array(this[Object.keys(this)[0]].length).fill(1)}}e.DataFrame=s});t("handlers/Handler",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Handler=void 0;class s{constructor(){this.registerCallbacks=(t,e)=>{this.callbacks.push(...t);this.when.push(...e);return this};this.notifyAll=s=>{this.callbacks.filter((t,e)=>this.when[e]===s).forEach(t=>t())};this.callbacks=[];this.when=[]}}e.Handler=s});t("handlers/MarkerHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MarkerHandler=void 0;class i extends s.Handler{constructor(t){super();this.isOfMembership=(t,e)=>{if(e===1)return true;const{current:s,past:i}=this;if(e===128){return s[t]>1?!!(s[t]&128):!!(i[t]&128)}return s[t]>1?s[t]>=e:i[t]>=e};this.updateCurrent=(t,e)=>{this.clearCurrent();this.current.update(t,e);this.notifyAll("updateCurrent")};this.mergeCurrent=()=>{this.past.merge(this.current.asPersistent());this.notifyAll("mergeCurrent")};this.clearCurrent=()=>{this.current=new r([...this.past.asPersistent()])};this.clearAll=()=>{this.current.clear();this.past.clear()};this.n=t;this.current=new r(t);this.past=new r(t);this.callbacks=[];this.when=[]}}e.MarkerHandler=i;class r extends Uint8Array{constructor(t){super(t);this.clear=()=>this.fill(1);this.asPersistent=()=>{const t=new r(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.asTransient=()=>{const t=new r(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.merge=t=>{let e=this.length;while(e--){if(t[e]===1)continue;this[e]=t[e]}};this.update=(t,e)=>{let s=t.length;if(e===128){while(s--)this[t[s]]=this[t[s]]|128;return}while(s--)this[t[s]]=e};if(typeof t==="number")this.fill(1)}}});t("wrangler/Cast",["require","exports","functions"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Cast=void 0;class i{constructor(t){this.getSplitOf=t=>{const{acrossVec:e,indices:s,uniqueIndices:i,marker:r}=this;const n=Array.from(Array(i.length),t=>[]);let a=s.length;while(a--){if(!t||r.isOfMembership(a,t)){n[s[a]].push(e[a])}}return n};this.extract=s=>{var t;const{marker:i,allUnique:e,withinFun:r,withinArgs:n,acrossVec:a,getSplitOf:l}=this;if(s){if(e){return(t=a.filter((t,e)=>i.isOfMembership(e,s)))!==null&&t!==void 0?t:[]}return l(s).map(t=>r(t,...n))}if(e)return a;return l().map(t=>r(t,...n))};this.registerAcross=(t,...e)=>{this.acrossFun=t;this.acrossArgs=e;return this};this.registerWithin=(t,...e)=>{this.withinFun=t;this.withinArgs=e;return this};this.vector=t;this.marker=null;this.indices=null;this.allUnique=false;this.acrossFun=s.identity;this.acrossArgs=[];this.withinFun=s.identity;this.withinArgs=[]}get uniqueIndices(){return Array.from(new Set(this.indices))}get acrossVec(){return this.acrossFun(this.vector,...this.acrossArgs)}get defaultSplit(){const{acrossVec:i,indices:t,uniqueIndices:e}=this;const s=e.map(s=>t.flatMap((t,e)=>t===s?i[e]:[]));return s}}e.Cast=i});t("wrangler/Wrangler",["require","exports","functions","wrangler/Cast"],function(t,e,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Wrangler=void 0;class s{constructor(t,e,s){this.getVariable=t=>{return this.data[this.mapping.get(t)]};this.extractAsIs=(...t)=>{this.indices=Array.from(Array(this.marker.n),(t,e)=>e);t.forEach(t=>{this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker;this[t].allUnique=true});return this};this.splitBy=(...t)=>{t.forEach((t,e)=>{this.by.add(t);this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.splitWhat=(...t)=>{t.forEach(t=>{this.what.add(t);this[t]=new r.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.doAcross=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerAcross(e,...s)});return this}this[t].registerAcross(e,...s);return this};this.doWithin=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerWithin(e,...s)});return this}this[t].registerWithin(e,...s);return this};this.assignIndices=()=>{const{what:t,by:e}=this;const s=Array.from(e).map(t=>this[t].acrossVec);this.indices=i.uniqueRowIds(s);Array.from([...e,...t]).map(t=>{this[t].indices=this.indices});return this};this.data=t;this.mapping=e;this.marker=s;this.indices=[];this.by=new Set;this.what=new Set}}e.Wrangler=s});t("representations/Representation",["require","exports","datastructures","functions","globalparameters"],function(t,e,s,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Representation=void 0;class r{constructor(t){this.getMapping=(t,e)=>{var s,i;let r=(s=this.wrangler[t])===null||s===void 0?void 0:s.extract(e);r=(i=this.scales[t])===null||i===void 0?void 0:i.dataToPlot(r);return r!==null&&r!==void 0?r:[]};this.getPars=t=>{if(t===128)return this.pars[this.pars.length-1];return this.pars[(t&~128)-1]};this.drawBase=t=>{};this.drawHighlight=(t,e)=>{};this.registerScales=t=>{this.scales=t;return this};this.defaultize=()=>{this.alphaMultiplier=1;this.sizeMultiplier=1};this.inSelection=e=>{const{wrangler:t,boundingRects:s}=this;const i=s.map(t=>{return n.rectOverlap(e,t)});const r=t.indices.flatMap((t,e)=>{return i[t]?e:[]});return r};this.atClick=e=>{const{wrangler:t,boundingRects:s}=this;const i=s.map(t=>{return n.pointInRect(e,t)});const r=t.indices.flatMap((t,e)=>{return i[t]?e:[]});return r};this.onKeypress=t=>{const{sizeMultiplier:e,sizeLimits:s,alphaMultiplier:i,alphaLimits:r}=this;if(t==="KeyR")this.defaultize();if(t==="Minus"&&e){this.sizeMultiplier=n.gatedMultiply(e,.8,s)}if(t==="Equal"&&e&&e<s.max){this.sizeMultiplier=n.gatedMultiply(e,1.2,s)}if(t==="BracketLeft"&&i){this.alphaMultiplier=n.gatedMultiply(i,.8,r)}if(t==="BracketRight"&&i)this.alphaMultiplier=n.gatedMultiply(i,1.2,r)};this.wrangler=t;this.pars=s.validMembershipArray.map(t=>{const e=i.globalParameters.reps;if(t===128)return n.accessIndexed(e,e.colour.length-1);return n.accessIndexed(e,(t&~128)-1)});this.sizeMultiplier=1;this.alphaMultiplier=1;this.sizeLimits={min:.001,max:10};this.alphaLimits={min:.01,max:1}}get boundingRects(){return[]}}e.Representation=r});t("representations/Bars",["require","exports","datastructures","representations/Representation"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bars=void 0;class r extends i.Representation{constructor(t,e){super(t);this.defaultize=()=>{this.sizeMultiplier=this.widthMultiplier;this.alphaMultiplier=1};this.getMappings=e=>{const t=["x","y"];return t.map(t=>this.getMapping(t,e))};this.drawBase=t=>{const[e,s]=this.getMappings();const{y0Scalar:i,widthScalar:r,alphaMultiplier:n}=this;const a=Array.from(Array(e.length),t=>i);const l=Array.from(Array(e.length),t=>r);const o=Object.assign(Object.assign({},this.getPars(1)),{alpha:n});t.drawBarsV(e,s,a,l,o)};this.drawHighlight=o=>{s.highlightMembershipArray.forEach(t=>{const[e,s]=this.getMappings(t);if(!(e.length>0))return;const{y0Scalar:i,widthScalar:r}=this;const n=Array.from(Array(e.length),t=>i);const a=Array.from(Array(e.length),t=>r);const l=Object.assign(Object.assign({},this.getPars(t)),{alpha:1});o.drawBarsV(e,s,n,a,l)})};this.widthMultiplier=e;this.sizeMultiplier=e;this.sizeLimits={min:.01,max:1};this.alphaMultiplier=1}get y0Scalar(){return this.scales.y.plotMin}get widthScalar(){const t=this.getMapping("x");return this.sizeMultiplier*(t.sort()[1]-t.sort()[0])}get boundingRects(){const[t,s]=this.getMappings();const[i,r]=[this.widthScalar/2,this.y0Scalar];return t.map((t,e)=>[[t-i,r],[t+i,s[e]]])}}e.Bars=r});t("representations/Points",["require","exports","datastructures","representations/Representation"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Points=void 0;class r extends i.Representation{constructor(t){super(t);this.getMappings=e=>{const{getMapping:s,getPars:t,defaultRadius:i,sizeMultiplier:r}=this;const n=["x","y","size"];let[a,l,o]=n.map(t=>s(t,e));const h=t(e).radius;if(!o.length){o=Array(a.length).fill(h*i*r)}if(o.length){o=o.map(t=>t*h*i*r)}return[a,l,o]};this.drawBase=t=>{const[e,s,i]=this.getMappings(1);const r=Object.assign(Object.assign({},this.getPars(1)),{alpha:this.alphaMultiplier});t.drawPoints(e,s,i,r)};this.drawHighlight=n=>{s.highlightMembershipArray.forEach(t=>{const[e,s,i]=this.getMappings(t);if(!(e.length>0))return;const r=Object.assign(Object.assign({},this.getPars(t)),{alpha:1});n.drawPoints(e,s,i,r)})}}get defaultRadius(){return Math.min(this.scales.x.length,this.scales.y.length)/20}get boundingRects(){const[t,s,i]=this.getMappings(1);const r=1/Math.sqrt(2);return t.map((t,e)=>[[t-r*i[e],s[e]-r*i[e]],[t+r*i[e],s[e]+r*i[e]]])}}e.Points=r});t("representations/Squares",["require","exports","representations/Representation","datastructures"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Squares=void 0;class r extends s.Representation{constructor(t){super(t);this.getMappings=e=>{const{getMapping:s,maxWidth:i,sizeMultiplier:r}=this;const t=["x","y","size"];let[n,a,l]=t.map(t=>s(t,e));if(l.length>0){l=l.map(t=>i*t*r)}else{l=Array.from(Array(n.length),t=>i*r)}return[n,a,l]};this.drawBase=t=>{let[e,s,i]=this.getMappings();if(!e)return;const r=Object.assign(Object.assign({},this.getPars(1)),{alpha:this.alphaMultiplier});const n=s.map((t,e)=>t+i[e]/2);const a=n.map((t,e)=>t-i[e]);t.drawBarsV(e,a,n,i,r)};this.drawHighlight=o=>{i.highlightMembershipArray.forEach(t=>{let[e,s,i]=this.getMappings(t);const[,,r]=this.getMappings();if(!e)return;const n=Object.assign(Object.assign({},this.getPars(t)),{alpha:1});const a=s.map((t,e)=>t+r[e]/2);const l=a.map((t,e)=>t-i[e]);o.drawBarsV(e,l,a,r,n)})}}get maxWidth(){return Math.min(this.scales.x.intervalWidth,this.scales.y.intervalWidth)}get boundingRects(){const[t,s,i]=this.getMappings();return t.map((t,e)=>[[t-i[e]/2,s[e]-i[e]/2],[t+i[e]/2,s[e]+i[e]/2]])}}e.Squares=r});t("representations/representations",["require","exports","representations/Representation","representations/Bars","representations/Points","representations/Squares"],function(t,e,s,i,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e)});t("auxiliaries/Auxiliary",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Auxiliary=void 0;class s{constructor(){this.registerScales=t=>{this.scales=t;return this};this.draw=(t,...e)=>{};this.drawBase=(t,...e)=>{};this.drawUser=(t,e,...s)=>{}}}e.Auxiliary=s});t("auxiliaries/AxisBox",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisBox=void 0;class i extends s.Auxiliary{constructor(){super(...arguments);this.draw=t=>{const e=this.scales.x.plotMin;const s=this.scales.x.plotMax;const i=this.scales.y.plotMin;const r=this.scales.y.plotMax;t.drawLine([e,s],[i,i]);t.drawLine([e,e],[i,r])};this.drawBase=t=>{this.draw(t)};this.drawHighlight=t=>{this.draw(t)}}}e.AxisBox=i});t("auxiliaries/AxisText",["require","exports","auxiliaries/Auxiliary","functions"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisText=void 0;class r extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=e=>{return this.labels.map(t=>e.context.measureText(t))};this.draw=t=>{const{scales:e,along:s,other:i,breaks:r}=this;const n=Math.min(...[s,i].map(t=>.3*e[t].margins.lower*e[t].length));const a=Array.from(Array(r.length),t=>e[i].plotMin+(s==="x"?5:-5));const l={x:null,y:null};l[s]=r;l[i]=a;if(s==="x"){t.context.textBaseline="top";t.context.textAlign="center"}if(s==="y"){t.context.textBaseline="middle";t.context.textAlign="right"}t.drawText(l.x,l.y,this.labels,n)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.nbreaks=e!==null&&e!==void 0?e:4}get dataBreaks(){var t;return(t=this.scales[this.along].values)!==null&&t!==void 0?t:i.prettyBreaks(this.scales[this.along].data,this.nbreaks)}get breaks(){return this.scales[this.along].dataToPlot(this.dataBreaks)}get labels(){return this.scales[this.along].values?this.scales[this.along].values.map(t=>t.toString()):this.dataBreaks.map(t=>t.toString())}}e.AxisText=r});t("auxiliaries/AxisTitle",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisTitle=void 0;class i extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=t=>{return t.context.measureText(this.label)};this.draw=t=>{if(this.label==="_indicator")return;const{scales:e,along:s,other:i}=this;const r=Math.min(...[s,i].map(t=>.4*e[t].margins.lower*e[t].length));const n={x:null,y:null};n[s]=e[s].pctToPlot(.5);n[i]=e[i].pctToPlot(0)+(s==="x"?1:-1)*.85*e[i].margins.lower*e[i].length;const a=this.along==="x"?0:270;t.context.textAlign="center";t.context.textBaseline="middle";t.drawText([n.x],[n.y],[this.label],r,a)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.label=e}}e.AxisTitle=i});t("auxiliaries/HighlightRects",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HighlightRects=void 0;class i extends s.Auxiliary{constructor(t){super();this.updateCurrentOrigin=t=>{this.current[0]=t};this.updateCurrentEndpoint=t=>{this.current[1]=t};this.updateLast=()=>{this.last=[this.current[0],this.current[1]];this.empty=false};this.pushLastToPast=()=>{this.past.push([this.last[0],this.last[1]]);this.empty=false};this.clear=()=>{this.last=[[null,null],[null,null]];this.past=[];this.empty=true};this.draw=(t,e)=>{t.drawWindow([e[0][0],e[0][1]],[e[1][0],e[1][1]])};this.drawUser=e=>{const{drag:t,state:s}=this.handlers;if(this.empty){e.drawClear();return}if(!s.inState("none")){e.drawClear();e.drawDim();this.past.forEach(t=>{this.draw(e,t)});this.draw(e,this.last);return}e.drawClear();e.drawDim();this.draw(e,this.last)};this.current=[[null,null],[null,null]];this.last=[[null,null],[null,null]];this.past=[];this.empty=true;this.handlers=t;this.bgDrawn=false}get lastComplete(){return!this.last.flat().some(t=>t===null)}}e.HighlightRects=i});t("auxiliaries/auxiliaries",["require","exports","auxiliaries/Auxiliary","auxiliaries/AxisBox","auxiliaries/AxisText","auxiliaries/AxisTitle","auxiliaries/HighlightRects"],function(t,e,s,i,r,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e);h(a,e)});t("handlers/SizeHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SizeHandler=void 0;class i extends s.Handler{constructor(t,e=3,s=.85){super();this.nPlots=0;this.sceneWidth=parseInt(getComputedStyle(t).width,10);this.sceneHeight=parseInt(getComputedStyle(t).height,10);this.scaleFactor=e;this.shrinkFactor=s}get nRows(){return Math.floor(Math.sqrt(this.nPlots))}get nCols(){return Math.ceil(this.nPlots/this.nRows)}get plotHeight(){return this.shrinkFactor*this.sceneHeight/this.nRows}get plotWidth(){return this.shrinkFactor*this.sceneWidth/this.nCols}}e.SizeHandler=i});t("handlers/KeypressHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.KeypressHandler=void 0;class r extends i.Handler{constructor(){super();this.keyPressed=t=>{if(this.pressing&&!this.isRedrawKey)return;this.pressing=true;if(this.validKeys.includes(t.code)){this.lastPressed=t.code;this.currentlyPressed[this.validKeys.indexOf(t.code)]=true;this.notifyAll("keyPressed")}};this.keyReleased=t=>{this.pressing=false;if(this.validKeys.includes(t.code)){this.currentlyPressed[this.validKeys.indexOf(t.code)]=false;this.notifyAll("keyReleased")}};this.isPressed=s=>{return this.currentlyPressed.filter((t,e)=>this.validKeys[e]===s)[0]};this.callbacks=[];this.validKeys=["Equal","Minus","BracketLeft","BracketRight","ControlLeft","ShiftLeft","KeyR","Digit1","Digit2","Digit3"];this.redrawKeys=["Equal","Minus","BracketLeft","BracketRight","KeyR"];this.pressing=false;this.lastPressed="";this.currentlyPressed=Array(this.validKeys.length).fill(false);this.actions=["keydown","keyup"];this.consequences=["keyPressed","keyReleased"];this.actions.forEach((t,e)=>{document.body.addEventListener(t,t=>s.throttle(this[this.consequences[e]](t),100))})}get isRedrawKey(){return this.redrawKeys.includes(this.lastPressed)}get currentlyPressedKeys(){return this.validKeys.filter((t,e)=>this.currentlyPressed[e])}}e.KeypressHandler=r});t("handlers/StateHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.StateHandler=void 0;class i extends s.Handler{constructor(){super();this.activate=t=>{this.plotsActive[this.plotIds.indexOf(t)]=true;this.plotContainers[this.plotIds.indexOf(t)].classList.add("active")};this.activateAll=()=>{this.plotsActive.fill(true);this.plotContainers.forEach(t=>t.classList.add("active"))};this.deactivateAll=()=>{this.plotsActive.fill(false);this.plotContainers.forEach(t=>t.classList.remove("active"))};this.isActive=t=>{return this.plotsActive[this.plotIds.indexOf(t)]};this.inState=t=>{const{keypressHandler:e,validStates:s,stateKeys:i}=this;if(t==="none"&&!e.currentlyPressed.some(t=>t))return true;return e.isPressed(i[s.indexOf(t)])};this.plotIds=[];this.plotsActive=[];this.plotContainers=[];this.validStates=["not","or","group1","group2","group3"];this.stateKeys=["ControlLeft","ShiftLeft","Digit1","Digit2","Digit3"];this.membershipArray=[1,128,2,3,4]}get currentId(){var t;const{stateKeys:e,keypressHandler:s}=this;return(t=e.flatMap((t,e)=>s.currentlyPressedKeys.includes(t)?e:[])[0])!==null&&t!==void 0?t:-1}get current(){return this.validStates[this.currentId]}get membership(){var t;return(t=this.membershipArray[this.currentId])!==null&&t!==void 0?t:128}}e.StateHandler=i});t("handlers/DragHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DragHandler=void 0;class r extends i.Handler{constructor(t){super();this.startDrag=t=>{this.dragging=true;this.start=[t.offsetX,t.offsetY];this.notifyAll("startDrag")};this.whileDrag=t=>{const{dragging:e,notifyAll:s}=this;if(e){this.end=[t.offsetX,t.offsetY];const i=Math.pow(this.start[0]-this.end[0],2)+Math.pow(this.start[1]-this.end[1],2);if(i>50)s("whileDrag")}};this.endDrag=()=>{this.dragging=false;this.notifyAll("endDrag")};this.container=t;this.dragging=false;this.start=[null,null];this.end=[null,null];this.actions=["mousedown","mousemove","mouseup"];this.consequences=["startDrag","whileDrag","endDrag"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,s.throttle(this[this.consequences[e]],50))})}}e.DragHandler=r});t("handlers/ClickHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClickHandler=void 0;class i extends s.Handler{constructor(t){super();this.mouseDown=t=>{this.holding=true;this.clickCurrent=[t.offsetX,t.offsetY];this.clickLast=[t.offsetX,t.offsetY];this.notifyAll("mouseDown")};this.mouseUp=t=>{this.holding=false;this.clickCurrent=[null,null];this.notifyAll("mouseUp")};this.container=t;this.holding=false;this.clickCurrent=[null,null];this.clickLast=[null,null];this.actions=["mousedown","mouseup"];this.consequences=["mouseDown","mouseUp"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,t=>this[this.consequences[e]](t))})}}e.ClickHandler=i});t("handlers/handlers",["require","exports","handlers/SizeHandler","handlers/MarkerHandler","handlers/KeypressHandler","handlers/DragHandler","handlers/StateHandler","handlers/ClickHandler"],function(t,e,s,i,r,n,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e);h(a,e);h(l,e)});t("plot/GraphicStack",["require","exports","plot/GraphicLayer"],function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicStack=void 0;class s{constructor(t,e,s){this.initialize=()=>{const t=["graphicBase","graphicUser","graphicHighlight"];this.graphicDiv.appendChild(this.graphicContainer);this.graphicContainer.setAttribute("class","graphicContainer");t.forEach(t=>{this[t]=new i.GraphicLayer(this.globals,this.dimensions);this.graphicContainer.appendChild(this[t].canvas)});this.graphicBase.drawBackground()};this.graphicDiv=t;this.graphicContainer=document.createElement("div");this.globals=e;this.dimensions=s;this.initialize()}get width(){if(this.dimensions)return this.dimensions.width;return this.globals.size.plotWidth}get height(){if(this.dimensions)return this.dimensions.height;return this.globals.size.plotHeight}}e.GraphicStack=s});t("plot/Plot",["require","exports","functions","auxiliaries/auxiliaries","handlers/handlers","plot/GraphicStack"],function(t,e,l,o,h,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Plot=void 0;class i extends s.GraphicStack{constructor(t){const{id:e,element:s,data:i,mapping:r,globals:n,dimensions:a}=t;super(s,n,a);this.resize=()=>{const t=["graphicBase","graphicUser","graphicHighlight"];this.scales.x.setLength(this.width);this.scales.y.setLength(this.height);this.graphicContainer.style.width=`${this.width}px`;this.graphicContainer.style.height=`${this.height}px`;t.forEach(t=>this[t].resize())};this.activate=()=>{this.handlers.state.deactivateAll();this.handlers.state.activate(this.id)};this.callChildren=(t,e,...s)=>{const i=this[t];Object.keys(i).forEach(t=>{i[t][e]?i[t][e](...s):null})};this.mapChildren=(t,e,...s)=>{const i=this[t];return Object.keys(i).map(t=>{return i[t][e]?i[t][e](...s):null})};this.getUnique=s=>{const{wranglers:i}=this;const t=Object.keys(i).flatMap(t=>{var e;return(e=i[t][s].extract())!==null&&e!==void 0?e:[]});return Array.from(new Set(t))};this.inSelection=t=>{const{mapChildren:e}=this;const s=e("representations","inSelection",t);return Array.from(new Set(s.flat()))};this.inClickPosition=t=>{const{mapChildren:e}=this;const s=e("representations","atClick",t);return Array.from(new Set(s.flat()))};this.startDrag=()=>{const{marker:t,state:e,drag:s}=this.handlers;const{highlightrects:i}=this.auxiliaries;if(!e.inState("none")&&i.lastComplete){i.pushLastToPast()}i.updateCurrentOrigin(s.start)};this.whileDrag=()=>{const{marker:t,drag:e,state:s}=this.handlers;const{highlightrects:i}=this.auxiliaries;i.updateCurrentEndpoint(e.end);i.updateLast();this.drawUser();t.updateCurrent(this.inSelection([e.start,e.end]),s.membership)};this.endDrag=()=>{const{marker:t,state:e}=this.handlers;const{highlightrects:s}=this.auxiliaries;t.mergeCurrent();if(!e.inState("none")&&s.lastComplete){s.pushLastToPast()}};this.onKeypress=()=>{const{callChildren:t,drawHighlight:e}=this;const{keypress:s}=this.handlers;t("handlers","onKeypress",s.lastPressed);if(this.active){t("representations","onKeypress",s.lastPressed);e()}};this.onKeyRelease=()=>{const{handlers:t,callChildren:e}=this;e("handlers","onKeyRelease",t.keypress.lastPressed);if(this.active){e("representations","onKeyRelease",t.keypress.lastPressed)}};this.onMouseDownAnywhere=()=>{const{marker:t,state:e}=this.handlers;if(e.inState("none")){this.auxiliaries.highlightrects.clear();this.drawUser()}};this.onMouseDownHere=()=>{const{marker:t,click:e,drag:s,state:i}=this.handlers;const{highlightrects:r}=this.auxiliaries;if(i.inState("none")){t.clearCurrent();this.auxiliaries.highlightrects.clear()}i.deactivateAll();this.activate();t.updateCurrent(this.inClickPosition(e.clickLast),i.membership)};this.onDoubleClick=()=>{const{marker:t,drag:e,state:s}=this.handlers;s.activateAll();t.clearAll();this.auxiliaries.highlightrects.clear();this.drawHighlight();this.drawUser();s.deactivateAll()};this.draw=(t,...e)=>{const{representations:s,auxiliaries:i,callChildren:r}=this;const n="draw"+l.capitalize(t);const a="graphic"+l.capitalize(t);if(t!=="user")this[a].drawClear();if(t==="base")this[a].drawBackground();r("representations",n,this[a],...e);r("auxiliaries",n,this[a],...e)};this.drawBase=()=>this.draw("base");this.drawHighlight=()=>this.draw("highlight");this.drawUser=()=>{if(this.active||this.handlers.state.inState("none"))this.draw("user")};this.drawRedraw=()=>{this.drawBase();this.drawHighlight();this.drawUser()};this.initialize=()=>{const{handlers:t,scales:s,callChildren:e,onMouseDownHere:i,onMouseDownAnywhere:r,onDoubleClick:n,onKeypress:a,onKeyRelease:l,drawBase:o,drawHighlight:h,drawUser:c,startDrag:u,whileDrag:d,endDrag:p,graphicContainer:g,graphicDiv:f}=this;Object.keys(s).forEach(t=>{var e;(e=s[t])===null||e===void 0?void 0:e.registerData(this.getUnique(t))});e("representations","registerScales",s);e("auxiliaries","registerScales",s);this.handlers.drag.state=this.handlers.state;f.addEventListener("dblclick",n);f.addEventListener("mousedown",r);g.addEventListener("mousedown",i);t.marker.registerCallbacks([h,h],["updateCurrent","clearAll"]);t.state.registerCallbacks([c],["deactivateAll"]);t.drag.registerCallbacks([u,d,p],["startDrag","whileDrag","endDrag"]);t.keypress.registerCallbacks([a,l,o],["keyPressed","keyReleased","keyPressed"]);o()};this.id=e;this.representations={};this.wranglers={};this.scales={};this.handlers={marker:n.marker,keypress:n.keypress,state:n.state,drag:new h.DragHandler(this.graphicContainer),click:new h.ClickHandler(this.graphicContainer)};this.auxiliaries={axisbox:new o.AxisBox,axistextx:new o.AxisText("x"),axistexy:new o.AxisText("y"),axistitlex:new o.AxisTitle("x",r.get("x")),axistitley:new o.AxisTitle("y",r.get("y")),highlightrects:new o.HighlightRects(this.handlers)}}get active(){return this.handlers.state.isActive(this.id)}}e.Plot=i});t("plot/ScatterPlot",["require","exports","scales/scales","representations/representations","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScatterPlot=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;super(t);this.mapping=s;this.wranglers={wrangler1:new a.Wrangler(e,s,i.marker).extractAsIs(...s.keys())};this.scales=Object.assign({x:new r.XYScaleContinuous(this.width),y:new r.XYScaleContinuous(this.height,-1)},s.get("size")&&{size:new r.AreaScaleContinuous(1)});this.representations={points:new n.Points(this.wranglers.wrangler1)};this.initialize()}}e.ScatterPlot=i});t("plot/BubblePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BubblePlot=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;if(!s.has("size"))s.set("size","_indicator");super(t);this.wranglers={wrangler1:new l.Wrangler(e,s,i.marker).splitBy("x","y").splitWhat("size").doWithin("by",a.unique).doWithin("what",a.length).assignIndices()};this.scales={x:new r.XYScaleDiscrete(this.width),y:new r.XYScaleDiscrete(this.height,-1),size:new r.AreaScaleContinuous(this.width)};this.representations={points:new n.Points(this.wranglers.wrangler1)};this.initialize()}}e.BubblePlot=i});t("plot/BarPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BarPlot=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;super(t);this.wranglers={wrangler1:new l.Wrangler(e,s,i.marker).splitBy("x").splitWhat("y").doWithin("by",a.unique).doWithin("what",a.sum).assignIndices()};this.scales={x:new r.XYScaleDiscrete(this.width),y:new r.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new n.Bars(this.wranglers.wrangler1,.8)};this.initialize()}}e.BarPlot=i});t("plot/HistoPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HistoPlot=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;super(t);this.wranglers={wrangler1:new l.Wrangler(e,s,i.marker).splitBy("x").splitWhat("y").doAcross("by",a.bin,10).doWithin("by",a.unique).doWithin("what",a.sum).assignIndices()};this.scales={x:new r.XYScaleContinuous(this.width),y:new r.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new n.Bars(this.wranglers.wrangler1,1)};this.initialize()}}e.HistoPlot=i});t("plot/SquarePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SquarePlot=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;if(!s.has("size"))s.set("size","_indicator");super(t);this.wranglers={wrangler1:new l.Wrangler(e,s,i.marker).splitBy("x","y").splitWhat("size").doWithin("by",a.unique).doWithin("what",a.sum).assignIndices()};this.scales={x:new r.XYScaleDiscrete(this.width),y:new r.XYScaleDiscrete(this.height,-1),size:new r.LengthScaleContinuous(1)};this.representations={squares:new n.Squares(this.wranglers.wrangler1)};this.initialize()}}e.SquarePlot=i});t("plot/SquareHeatmap",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,r,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SquareHeatmap=void 0;class i extends s.Plot{constructor(t){const{data:e,mapping:s,globals:i}=t;if(!s.has("size"))s.set("size","_indicator");super(t);this.wranglers={wrangler1:new l.Wrangler(e,s,i.marker).splitBy("x","y").splitWhat("size").doAcross("by",a.toPretty,10).doWithin("by",a.unique).doWithin("what",a.sum).assignIndices()};this.scales={x:new r.XYScaleDiscrete(this.width),y:new r.XYScaleDiscrete(this.height,-1),size:new r.LengthScaleContinuous(1)};this.representations={squares:new n.Squares(this.wranglers.wrangler1)};this.initialize()}}e.SquareHeatmap=i});t("plot/plots",["require","exports","plot/ScatterPlot","plot/BubblePlot","plot/BarPlot","plot/HistoPlot","plot/SquarePlot","plot/SquareHeatmap"],function(t,e,s,i,r,n,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e);h(a,e);h(l,e)});t("datastructures",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.plotTypeArray=e.highlightMembershipArray=e.validMembershipArray=e.baseMembershipArray=void 0;const s=[1,2,3,4];e.baseMembershipArray=s;const i=[...s,...s.map(t=>t+128),128];e.validMembershipArray=i;const r=i.filter(t=>t!==1);e.highlightMembershipArray=r;const n=["scatter","bubble","bar","histo","square","squareheat"];e.plotTypeArray=n});t("Mapping",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Mapping=void 0;class s extends Map{constructor(...t){super([...t]);if(!this.has("y"))this.set("y","_indicator")}}e.Mapping=s});t("helppaneltext",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.helpPanelText=void 0;e.helpPanelText=`
        Welcome to Plotscape! <br>
        Try interacting with the plots in the following ways: <br> <br>
        <kbd>Click</kbd> a plot to make it active <br>
        <kbd>+</kbd>/<kbd>-</kbd> to increase/decrease size of objects <br>
        <kbd>[</kbd>/<kbd>]</kbd> to decrease/increase opacity (alpha) of objects <br>
        <kbd>R</kbd> to reset graphical settings of the active plot <br>
        <kbd>Click-and-drag</kbd>/<kbd>click</kbd> to transiently select objects<br>
        <kbd>1</kbd>,<kbd>2</kbd>,<kbd>...</kbd> + <kbd>click-and-drag</kbd> to make a permanent (group) selection <br>
        <kbd>Double-click</kbd> to reset selection
    
        <br>
    `});t("Scene",["require","exports","datastructures","handlers/handlers","plot/plots","helppaneltext"],function(t,e,u,l,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scene=void 0;class s{constructor(t,e){this.addPlotWrapper=(e,t,s)=>{const{element:i,data:r,plotIds:n,plots:a,globals:l}=this;this.globals.size.nPlots++;const o=u.plotTypeArray.findIndex(t=>t===e);this.nPlotsOfType[o]++;const h=`${e}${this.nPlotsOfType[o]}`;const c={id:h,element:i,data:r,mapping:t,globals:l,dimensions:s};this.plots[h]=new d(e,c);n.push(h);l.state.plotIds.push(h);l.state.plotsActive.push(false);l.state.plotContainers.push(this.plots[h].graphicContainer);n.forEach(t=>{a[t].resize();a[t].drawRedraw()});return this};this.element=t;this.nObs=e[Object.keys(e)[0]].length;this.nPlotsOfType=Array(u.plotTypeArray.length).fill(0);this.plots={};this.plotIds=[];this.data=e;this.globals={size:new l.SizeHandler(this.element),marker:new l.MarkerHandler(this.nObs),keypress:new l.KeypressHandler,state:new l.StateHandler};t.classList.add("graphicDiv");this.globals.state.keypressHandler=this.globals.keypress;const s=document.head;const i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href="./styles.css";s.appendChild(i);const r=document.createElement("button");const n=document.createElement("div");r.innerText=`?`;r.classList.add("buttonHelp");n.innerHTML=o.helpPanelText;n.classList.add("helpPanel");const a=Math.min(this.globals.size.sceneWidth,this.globals.size.sceneHeight)*.05;r.style.width=`${a}px`;r.style.height=`${a}px`;r.style.fontSize=`${.5*a}px`;t.appendChild(n);t.appendChild(r);r.addEventListener("click",t=>{n.classList.toggle("activePanel")})}}e.Scene=s;class d{constructor(t,e){const s={scatter:i.ScatterPlot,bubble:i.BubblePlot,bar:i.BarPlot,histo:i.HistoPlot,square:i.SquarePlot,squareheat:i.SquareHeatmap};return new s[t](e)}}});t("main",["require","exports","Scene","plot/Plot","DataFrame","Mapping","functions"],function(t,e,s,i,r,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(i,e);h(r,e);h(n,e);h(a,e)});"marker:resolver";function a(e){if(i[e]){return i[e]}else if(i[e+"/index"]){return i[e+"/index"]}else{const t=["exports"];const s=t=>{try{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:require(e)})}catch(t){throw Error(['module "',e,'" not found.'].join(""))}};return{dependencies:t,factory:s}}}const l={};function o(t){if(l[t]){return l[t]}if(t==="exports"){return{}}const e=a(t);if(typeof e.factory!=="function"){return e.factory}l[t]={};const s=e.dependencies.map(t=>o(t));e.factory(...s);const i=s[e.dependencies.indexOf("exports")];l[t]=i["__cjsModule"]?i.default:i;return l[t]}if(r[0]!==null){return o(r[0])}})();