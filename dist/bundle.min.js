var PLOTSCAPE=(()=>{const r={};const i=[null];function t(t,e,s){r[t]={dependencies:e,factory:s};i[0]=t}t("require",["exports"],t=>{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:t=>o(t)})});var n=this&&this.__createBinding||(Object.create?function(t,e,s,r){if(r===undefined)r=s;var i=Object.getOwnPropertyDescriptor(e,s);if(!i||("get"in i?!e.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return e[s]}}}Object.defineProperty(t,r,i)}:function(t,e,s,r){if(r===undefined)r=s;t[r]=e[s]});var h=this&&this.__exportStar||function(t,e){for(var s in t)if(s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s))n(e,t,s)};t("handlers/Handler",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Handler=void 0;class s{constructor(){this.registerCallbacks=(t,e)=>{this.callbacks.push(...t);this.when.push(...e);return this};this.notifyAll=s=>{this.callbacks.filter((t,e)=>this.when[e]===s).forEach(t=>t())};this.callbacks=[];this.when=[]}}e.Handler=s});t("handlers/MarkerHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.MarkerHandler=void 0;class r extends s.Handler{constructor(t){super();this.isOfMembership=(t,e)=>{if(e===1)return true;const{current:s,past:r}=this;if(e===128){return s[t]>1?!!(s[t]&128):!!(r[t]&128)}return s[t]>1?s[t]>=e:r[t]>=e};this.updateCurrent=(t,e)=>{this.clearCurrent();this.current.update(t,e);this.notifyAll("updateCurrent")};this.mergeCurrent=()=>{this.past.merge(this.current.asPersistent());this.notifyAll("mergeCurrent")};this.clearCurrent=()=>{this.current=new i([...this.past.asPersistent()])};this.clearAll=()=>{this.current.clear();this.past.clear()};this.n=t;this.current=new i(t);this.past=new i(t);this.callbacks=[];this.when=[]}}e.MarkerHandler=r;class i extends Uint8Array{constructor(t){super(t);this.clear=()=>this.fill(1);this.asPersistent=()=>{const t=new i(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.asTransient=()=>{const t=new i(this.length);let e=this.length;while(e--)t[e]=this[e]&~128;return t};this.merge=t=>{let e=this.length;while(e--){if(t[e]===1)continue;this[e]=t[e]}};this.update=(t,e)=>{let s=t.length;if(e===128){while(s--)this[t[s]]=this[t[s]]|128;return}while(s--)this[t[s]]=e};if(typeof t==="number")this.fill(1)}}});t("functions",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.timeExecution=e.rectOverlap=e.pointInRect=e.uniqueRowIds=e.uniqueRows=e.arrTranspose=e.arrEqual=e.toPretty=e.prettyBreaks=e.accessIndexed=e.accessUnpeel=e.accessDeep=e.throttle=e.unique=e.match=e.which=e.gatedMultiply=e.quantile=e.bin=e.capitalize=e.max=e.min=e.mean=e.sum=e.length=e.identity=e.isNumeric=void 0;const i=t=>{return JSON.parse(JSON.stringify(t))};const s=t=>typeof t[0]==="number";e.isNumeric=s;const r=t=>t;e.identity=r;const n=t=>t.length?t.length:0;e.length=n;const a=t=>{if(!t.length)return null;return t.reduce((t,e)=>t+e,0)};e.sum=a;const l=t=>t.length?a(t)/t.length:null;e.mean=l;const o=t=>t.length?Math.min(...t):null;e.min=o;const h=t=>t.length?Math.max(...t):null;e.max=h;const c=t=>{return typeof t==="string"?t.charAt(0).toUpperCase()+t.slice(1):t.map(t=>t.charAt(0).toUpperCase()+t.slice(1))};e.capitalize=c;const u=(s,t=5)=>{if(!s.length)return null;const e=Math.max(...s)-Math.min(...s);const r=e/t;const i=Array.from(Array(t+1),(t,e)=>Math.min(...s)+e*r);const n=i.map((t,e)=>(t+i[e-1])/2);i.reverse();n.shift();return s.map(e=>i.findIndex(t=>e>=t)).map(t=>t===0?i.length-2:i.length-t-1).map(t=>n[t])};e.bin=u;const d=(t,e)=>{if(!t.length)return null;const s=t.sort((t,e)=>t-e);if(typeof e==="number"){const r=e*(s.length-1);const{lwr:i,uppr:n}={lwr:Math.floor(r),uppr:Math.ceil(r)};return s[i]+r%1*(s[n]-s[i])}const r=e.map(t=>t*(s.length-1));const{lwr:i,uppr:n}={lwr:r.map(t=>Math.floor(t)),uppr:r.map(t=>Math.ceil(t))};return r.map((t,e)=>s[i[e]]+t%1*(s[n[e]]-s[i[e]]))};e.quantile=d;const p=(t,e,s)=>{if(t*e<s.min)return s.min;if(t*e>s.max)return s.max;return t*e};e.gatedMultiply=p;const g=(t,s)=>{return t.map((t,e)=>t===s?e:NaN).filter(t=>!isNaN(t))};e.which=g;const f=(t,e)=>{return t.map(t=>e.indexOf(t))};e.match=f;const y=t=>{const e=Array.from(new Set(t));return e.length===1?e[0]:e};e.unique=y;const m=(t,...e)=>{return e.reduce((t,e)=>t&&t[e],t)};e.accessDeep=m;const x=(e,...s)=>{var r;const i=s.pop();let n;for(let t=s.length;t>=0;t--){n=(r=m(e,...s,i))!==null&&r!==void 0?r:null;if(n)break;s.pop()}return n};e.accessUnpeel=x;const w=(e,s)=>{const r=i(e);Object.keys(e).forEach(t=>r[t]=e[t][s]);return r};e.accessIndexed=w;const b=(s,r)=>{let i=0;return(...t)=>{const e=(new Date).getTime();if(e-i<r)return;i=e;s(...t)}};e.throttle=b;const M=(t,e=4)=>{const[s,r]=[Math.min(...t),Math.max(...t)];const i=r-s;const n=i/e;const a=Math.floor(Math.log10(n));const l=[1,2,4,5,6,8,10].map(t=>Math.pow(t-n/Math.pow(10,a),2));const o=Math.pow(10,a)*[1,2,4,5,6,8,10][l.indexOf(Math.min(...l))];const h=Math.abs(a)>4;const c=Math.round(s/o)*o;const u=Math.round(r/o)*o;const d=Array.from(Array(Math.floor((u-c)/o-1)),(t,e)=>c+(e+1)*o);const p=[c,...d,u].map(t=>parseFloat(t.toFixed(4)));return h?p.map(t=>t.toExponential()):p};e.prettyBreaks=M;const v=(e,t=5)=>{const s=M(e,t);let r=e.length;const i=Array(e.length);while(r--){const n=s.map(t=>Math.pow(t-e[r],2));i[r]=s[n.indexOf(Math.min(...n))]}return i};e.toPretty=v;const k=(t,s)=>{return t.length==s.length&&t.every((t,e)=>t===s[e])};e.arrEqual=k;const P=s=>{return s[0].map((t,e)=>s.map(t=>t[e]))};e.arrTranspose=P;const S=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=y(t);const r=e.map(s=>t.flatMap((t,e)=>t===s?e:[]));const i=r.map(e=>{return s.map(t=>t[e[0]])});return{values:i,indices:r}};e.uniqueRows=S;const A=s=>{const t=s[0].map((t,e)=>JSON.stringify(s.map(t=>t[e])));const e=y(t);return t.map(t=>e.indexOf(t))};e.uniqueRowIds=A;const C=(t,e)=>{return(t[0]-e[0][0])*(t[0]-e[1][0])<0&&(t[1]-e[0][1])*(t[1]-e[1][1])<0};e.pointInRect=C;const O=(t,s)=>{const[e,r]=[0,1].map(e=>t.map(t=>t[e]));const[i,n]=[0,1].map(e=>s.map(t=>t[e]));return!(Math.max(...e)<Math.min(...i)||Math.min(...e)>Math.max(...i)||Math.max(...r)<Math.min(...n)||Math.min(...r)>Math.max(...n))};e.rectOverlap=O;const _=(t,s)=>{return t.map((t,e)=>t-s[e])};const q=(s,r,e)=>{const t=Math.min(...r.map(t=>t[0]));const i=Math.min(...r.map(t=>t[1]));const n=Math.max(...r.map(t=>t[0]));const a=Math.max(...r.map(t=>t[1]));if(s[0]<t||s[0]>n||s[1]<i||s[1]>a){return false}const l=Array.from(Array(r.length),(t,e)=>e);const o=Array.from(Array(r.length),(t,e)=>e);o.shift();o.push(0);const h=l.map((t,e)=>_(r[o[e]],r[t]));const c=r.map((t,e)=>{return[(s[1]-t[1])/h[e][1],(s[1]-t[1])/h[e][1]*h[e][0]+t[0]-s[0]]});const u=c.map(t=>t[1]).filter(t=>t>0&&t<e);return u.length%2===1};const D=t=>{const e=performance.now();t();const s=performance.now();return s-e};e.timeExecution=D});t("handlers/KeypressHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.KeypressHandler=void 0;class i extends r.Handler{constructor(){super();this.keyPressed=t=>{if(this.pressing&&!this.isRedrawKey)return;this.pressing=true;if(this.validKeys.includes(t.code)){this.lastPressed=t.code;this.currentlyPressed[this.validKeys.indexOf(t.code)]=true;this.notifyAll("keyPressed")}};this.keyReleased=t=>{this.pressing=false;if(this.validKeys.includes(t.code)){this.currentlyPressed[this.validKeys.indexOf(t.code)]=false;this.notifyAll("keyReleased")}};this.isPressed=s=>{return this.currentlyPressed.filter((t,e)=>this.validKeys[e]===s)[0]};this.callbacks=[];this.validKeys=["Equal","Minus","BracketLeft","BracketRight","ControlLeft","ShiftLeft","KeyR","Digit1","Digit2","Digit3"];this.redrawKeys=["Equal","Minus","BracketLeft","BracketRight","KeyR"];this.pressing=false;this.lastPressed="";this.currentlyPressed=Array(this.validKeys.length).fill(false);this.actions=["keydown","keyup"];this.consequences=["keyPressed","keyReleased"];this.actions.forEach((t,e)=>{document.body.addEventListener(t,t=>s.throttle(this[this.consequences[e]](t),100))})}get isRedrawKey(){return this.redrawKeys.includes(this.lastPressed)}get currentlyPressedKeys(){return this.validKeys.filter((t,e)=>this.currentlyPressed[e])}}e.KeypressHandler=i});t("handlers/StateHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.StateHandler=void 0;class r extends s.Handler{constructor(){super();this.activate=t=>{this.plotsActive[this.plotIds.indexOf(t)]=true;this.plotContainers[this.plotIds.indexOf(t)].classList.add("active")};this.activateAll=()=>{this.plotsActive.fill(true);this.plotContainers.forEach(t=>t.classList.add("active"))};this.deactivateAll=()=>{this.plotsActive.fill(false);this.plotContainers.forEach(t=>t.classList.remove("active"))};this.isActive=t=>{return this.plotsActive[this.plotIds.indexOf(t)]};this.inState=t=>{const{keypressHandler:e,validStates:s,stateKeys:r}=this;if(t==="none"&&!e.currentlyPressed.some(t=>t))return true;return e.isPressed(r[s.indexOf(t)])};this.plotIds=[];this.plotsActive=[];this.plotContainers=[];this.validStates=["not","or","group1","group2","group3"];this.stateKeys=["ControlLeft","ShiftLeft","Digit1","Digit2","Digit3"];this.membershipArray=[1,128,2,3,4]}get currentId(){var t;const{stateKeys:e,keypressHandler:s}=this;return(t=e.flatMap((t,e)=>s.currentlyPressedKeys.includes(t)?e:[])[0])!==null&&t!==void 0?t:-1}get current(){return this.validStates[this.currentId]}get membership(){var t;return(t=this.membershipArray[this.currentId])!==null&&t!==void 0?t:128}}e.StateHandler=r});t("handlers/DragHandler",["require","exports","functions","handlers/Handler"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DragHandler=void 0;class i extends r.Handler{constructor(t){super();this.startDrag=t=>{this.dragging=true;this.start=[t.offsetX,t.offsetY];this.notifyAll("startDrag")};this.whileDrag=t=>{const{dragging:e,notifyAll:s}=this;if(e){this.end=[t.offsetX,t.offsetY];const r=Math.pow(this.start[0]-this.end[0],2)+Math.pow(this.start[1]-this.end[1],2);if(r>50)s("whileDrag")}};this.endDrag=()=>{this.dragging=false;this.notifyAll("endDrag")};this.container=t;this.dragging=false;this.start=[null,null];this.end=[null,null];this.actions=["mousedown","mousemove","mouseup"];this.consequences=["startDrag","whileDrag","endDrag"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,s.throttle(this[this.consequences[e]],50))})}}e.DragHandler=i});t("globalparameters",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.globalParameters=void 0;e.globalParameters={bgCol:`#f2efde`,reps:{col:[`#cccccc`,`#1b9e77`,`#d95f02`,`#7570b3`,`#ffffffCC`],strokeCol:[null,null,null,null,`#000000`],strokeWidth:[null,null,null,null,1],radius:[1,1,1,1,1]}}});t("plot/GraphicLayer",["require","exports","globalparameters"],function(t,e,g){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicLayer=void 0;class s{constructor(t,e){this.resize=()=>{this.canvas.style.width=`${this.width}px`;this.canvas.style.height=`${this.height}px`;this.canvas.width=Math.ceil(this.width*this.scaleFactor);this.canvas.height=Math.ceil(this.height*this.scaleFactor);this.context.scale(this.scaleFactor,this.scaleFactor)};this.dropMissing=(...t)=>{let e=t[0].length;while(e--){if(t.map(t=>t[e]).some(t=>t===null||t<0))t.map(t=>t.splice(e,1))}return t};this.toAlpha=(t,e)=>{if(e===1)return t;const s=Math.floor(e*255).toString(16).toUpperCase();const r=s.length<2?t+"0"+s:t+s;return r};this.drawClear=()=>{const t=this.context;t.save();t.clearRect(0,0,this.width,this.height);t.restore()};this.drawBackground=()=>{const t=this.context;t.save();t.fillStyle=g.globalParameters.bgCol;t.fillRect(0,0,this.width,this.height);t.restore()};this.drawBarsV=(t,e,s,r,i={col:g.globalParameters.reps.col[0],strokeCol:null,strokeWidth:null,alpha:1})=>{const[n,a,l,o]=this.dropMissing(t,e,s,r);const{col:h,strokeCol:c,strokeWidth:u,alpha:d}=i;const p=this.context;p.save();p.fillStyle=this.toAlpha(h,d);p.strokeStyle=c;p.lineWidth=u;n.forEach((t,e)=>{if(h)p.fillRect(t-o[e]/2,a[e],o[e],l[e]-a[e]);if(c)p.strokeRect(t-o[e]/2,a[e],o[e],l[e]-a[e])});p.restore()};this.drawPoints=(t,s,e={col:g.globalParameters.reps.col[0],radius:5,strokeCol:null,strokeWidth:null,alpha:1})=>{const r=this.context;const{col:i,radius:n,strokeCol:a,strokeWidth:l,alpha:o}=e;const h=typeof n==="number"?Array.from(Array(t.length),t=>n):n;r.save();r.fillStyle=this.toAlpha(i,o);r.strokeStyle=a;r.lineWidth=l;t.forEach((t,e)=>{r.beginPath();r.arc(t,s[e],h[e]/2,0,Math.PI*2);a?r.stroke():null;i?r.fill():null});r.restore()};this.drawRectsHW=(t,s,r,i,e={col:g.globalParameters.reps.col[0],strokeCol:null,strokeWidth:null,alpha:1})=>{const n=this.context;const{col:a,strokeCol:l,strokeWidth:o,alpha:h}=e;n.save();n.fillStyle=this.toAlpha(a,h);n.strokeStyle=l;n.lineWidth=o;t.forEach((t,e)=>{a?n.fillRect(t-i[e]/2,s[e]-r[e]/2,r[e],i[e]):null;l?n.strokeRect(t-i[e]/2,s[e]-r[e]/2,r[e],i[e]):null});n.restore()};this.drawLine=(t,s,e="black")=>{const r=this.context;r.save();r.beginPath();r.strokeStyle=e;r.moveTo(t[0],s[0]);t.shift();s.shift();t.forEach((t,e)=>{r.lineTo(t,s[e])});r.stroke();r.restore()};this.drawText=(t,s,r,e=20,i)=>{const n=this.context;n.save();n.font=`${e}px Times New Roman`;t.forEach((t,e)=>{n.translate(t,s[e]);if(i)n.rotate(i/360*Math.PI*2);n.fillText(r[e],0,0);n.translate(-t,-s[e])});n.restore()};this.drawDim=(t="rgba(120, 120, 120, 0.1)")=>{const e=this.context;e.fillStyle=t;e.fillRect(0,0,this.width,this.height)};this.drawWindow=(t,e,s="rgba(0, 0, 0, 0.25)")=>{const r=this.context;r.save();r.strokeStyle=s;r.setLineDash([5,5]);r.clearRect(t[0],t[1],e[0]-t[0],e[1]-t[1]);r.restore()};this.globals=t;this.dimensions=e;this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.backgroundColour=g.globalParameters.bgCol;this.resize()}get width(){if(this.dimensions)return this.dimensions.width;return this.globals.plotWidth}get height(){if(this.dimensions)return this.dimensions.height;return this.globals.plotHeight}get scaleFactor(){return this.globals.scaleFactor}}e.GraphicLayer=s});t("DataFrame",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.DataFrame=void 0;class s{constructor(e){Object.keys(e).forEach(t=>this[t]=e[t])}get _indicator(){return Array(this[Object.keys(this)[0]].length).fill(1)}}e.DataFrame=s});t("wrangler/Cast",["require","exports","functions"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Cast=void 0;class r{constructor(t){this.getSplitOf=t=>{const{acrossVec:e,indices:s,uniqueIndices:r,marker:i}=this;const n=Array.from(Array(r.length),t=>[]);let a=s.length;while(a--){if(!t||i.isOfMembership(a,t)){n[s[a]].push(e[a])}}return n};this.extract=s=>{var t;const{marker:r,allUnique:e,withinFun:i,withinArgs:n,acrossVec:a,getSplitOf:l}=this;if(s){if(e){return(t=a.filter((t,e)=>r.isOfMembership(e,s)))!==null&&t!==void 0?t:[]}return l(s).map(t=>i(t,...n))}if(e)return a;return l().map(t=>i(t,...n))};this.registerAcross=(t,...e)=>{this.acrossFun=t;this.acrossArgs=e;return this};this.registerWithin=(t,...e)=>{this.withinFun=t;this.withinArgs=e;return this};this.vector=t;this.marker=null;this.indices=null;this.allUnique=false;this.acrossFun=s.identity;this.acrossArgs=[];this.withinFun=s.identity;this.withinArgs=[]}get uniqueIndices(){return Array.from(new Set(this.indices))}get acrossVec(){return this.acrossFun(this.vector,...this.acrossArgs)}get defaultSplit(){const{acrossVec:r,indices:t,uniqueIndices:e}=this;const s=e.map(s=>t.flatMap((t,e)=>t===s?r[e]:[]));return s}}e.Cast=r});t("wrangler/Wrangler",["require","exports","functions","wrangler/Cast"],function(t,e,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Wrangler=void 0;class s{constructor(t,e,s){this.getVariable=t=>{return this.data[this.mapping.get(t)]};this.extractAsIs=(...t)=>{this.indices=Array.from(Array(this.marker.n),(t,e)=>e);t.forEach(t=>{this[t]=new i.Cast(this.getVariable(t));this[t].marker=this.marker;this[t].allUnique=true});return this};this.splitBy=(...t)=>{t.forEach((t,e)=>{this.by.add(t);this[t]=new i.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.splitWhat=(...t)=>{t.forEach(t=>{this.what.add(t);this[t]=new i.Cast(this.getVariable(t));this[t].marker=this.marker});return this};this.doAcross=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerAcross(e,...s)});return this}this[t].registerAcross(e,...s);return this};this.doWithin=(t,e,...s)=>{if(t==="by"||t==="what"){Array.from(this[t]).forEach(t=>{this[t].registerWithin(e,...s)});return this}this[t].registerWithin(e,...s);return this};this.assignIndices=()=>{const{what:t,by:e}=this;const s=Array.from(e).map(t=>this[t].acrossVec);this.indices=r.uniqueRowIds(s);Array.from([...e,...t]).map(t=>{this[t].indices=this.indices});return this};this.data=t;this.mapping=e;this.marker=s;this.indices=[];this.by=new Set;this.what=new Set}}e.Wrangler=s});t("representations/Representation",["require","exports","datastructures","functions","globalparameters"],function(t,e,s,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Representation=void 0;class i{constructor(t){this.getMapping=(t,e)=>{var s,r;let i=(s=this.wrangler[t])===null||s===void 0?void 0:s.extract(e);i=(r=this.scales[t])===null||r===void 0?void 0:r.dataToPlot(i);return i!==null&&i!==void 0?i:[]};this.getPars=t=>{if(t===128)return this.pars[this.pars.length-1];return this.pars[(t&~128)-1]};this.drawBase=t=>{};this.drawHighlight=(t,e)=>{};this.registerScales=t=>{this.scales=t;return this};this.defaultize=()=>{this.alphaMultiplier=1;this.sizeMultiplier=1};this.inSelection=e=>{const{wrangler:t,boundingRects:s}=this;const r=s.map(t=>{return n.rectOverlap(e,t)});const i=t.indices.flatMap((t,e)=>{return r[t]?e:[]});return i};this.atClick=e=>{const{wrangler:t,boundingRects:s}=this;const r=s.map(t=>{return n.pointInRect(e,t)});const i=t.indices.flatMap((t,e)=>{return r[t]?e:[]});return i};this.onKeypress=t=>{const{sizeMultiplier:e,sizeLimits:s,alphaMultiplier:r,alphaLimits:i}=this;if(t==="KeyR")this.defaultize();if(t==="Minus"&&e){this.sizeMultiplier=n.gatedMultiply(e,.8,s)}if(t==="Equal"&&e&&e<s.max){this.sizeMultiplier=n.gatedMultiply(e,1.2,s)}if(t==="BracketLeft"&&r){this.alphaMultiplier=n.gatedMultiply(r,.8,i)}if(t==="BracketRight"&&r)this.alphaMultiplier=n.gatedMultiply(r,1.2,i)};this.wrangler=t;this.pars=s.validMembershipArray.map(t=>{const e=r.globalParameters.reps;if(t===128)return n.accessIndexed(e,e.col.length-1);return n.accessIndexed(e,(t&~128)-1)});this.sizeMultiplier=1;this.alphaMultiplier=1;this.sizeLimits={min:.001,max:10};this.alphaLimits={min:.01,max:1}}get boundingRects(){return[]}}e.Representation=i});t("representations/Bars",["require","exports","datastructures","representations/Representation"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Bars=void 0;class i extends r.Representation{constructor(t,e){super(t);this.defaultize=()=>{this.sizeMultiplier=this.widthMultiplier;this.alphaMultiplier=1};this.getMappings=e=>{const t=["x","y"];return t.map(t=>this.getMapping(t,e))};this.drawBase=t=>{const[e,s]=this.getMappings();const{y0Scalar:r,widthScalar:i,alphaMultiplier:n}=this;const a=Array.from(Array(e.length),t=>r);const l=Array.from(Array(e.length),t=>i);const{col:o,strokeCol:h,strokeWidth:c}=this.pars[0];const u={col:o,strokeCol:h,strokeWidth:c,alpha:n};t.drawBarsV(e,s,a,l,u)};this.drawHighlight=d=>{s.highlightMembershipArray.forEach(t=>{const[e,s]=this.getMappings(t);if(!(e.length>0))return;const{y0Scalar:r,widthScalar:i,alphaMultiplier:n}=this;const a=Array.from(Array(e.length),t=>r);const l=Array.from(Array(e.length),t=>i);const{col:o,strokeCol:h,strokeWidth:c}=this.getPars(t);const u={col:o,strokeCol:h,strokeWidth:c,alpha:1,width:l};d.drawBarsV(e,s,a,l,u)})};this.widthMultiplier=e;this.sizeMultiplier=e;this.sizeLimits={min:.01,max:1};this.alphaMultiplier=1}get y0Scalar(){return this.scales.y.plotMin}get widthScalar(){const t=this.getMapping("x");return this.sizeMultiplier*(t.sort()[1]-t.sort()[0])}get boundingRects(){const[t,s]=this.getMappings();const[r,i]=[this.widthScalar/2,this.y0Scalar];return t.map((t,e)=>[[t-r,i],[t+r,s[e]]])}}e.Bars=i});t("representations/Points",["require","exports","datastructures","representations/Representation"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Points=void 0;class i extends r.Representation{constructor(t){super(t);this.getMappings=e=>{const{getMapping:s,getPars:t,defaultRadius:r,sizeMultiplier:i}=this;const n=["x","y","size"];let[a,l,o]=n.map(t=>s(t,e));const h=t(e).radius;o=o.length>0?o.map(t=>h*t*r*i):Array.from(Array(a.length),t=>h*r*i);return[a,l,o]};this.drawBase=t=>{const[e,s,r]=this.getMappings(1);const{col:i,strokeCol:n,strokeWidth:a}=this.getPars(1);const l={col:i,radius:r,strokeCol:n,strokeWidth:a,alpha:this.alphaMultiplier};t.drawPoints(e,s,l)};this.drawHighlight=o=>{s.highlightMembershipArray.forEach(t=>{const[e,s,r]=this.getMappings(t);if(!(e.length>0))return;const{col:i,strokeCol:n,strokeWidth:a}=this.getPars(t);const l={col:i,radius:r,strokeCol:n,strokeWidth:a,alpha:1};o.drawPoints(e,s,l)})}}get defaultRadius(){return Math.min(this.scales.x.length,this.scales.y.length)/20}get boundingRects(){const[t,s,r]=this.getMappings(1);const i=1/Math.sqrt(2);return t.map((t,e)=>[[t-i*r[e],s[e]-i*r[e]],[t+i*r[e],s[e]+i*r[e]]])}}e.Points=i});t("representations/Squares",["require","exports","representations/Representation","datastructures"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Squares=void 0;class i extends s.Representation{constructor(t){super(t);this.getMappings=e=>{const{getMapping:s,maxWidth:r,sizeMultiplier:i}=this;const t=["x","y","size"];let[n,a,l]=t.map(t=>s(t,e));if(l.length>0){l=l.map(t=>r*t*i)}else{l=Array.from(Array(n.length),t=>r*i)}return[n,a,l]};this.drawBase=t=>{let[e,s,r]=this.getMappings();if(!e)return;const{col:i,strokeCol:n,strokeWidth:a}=this.getPars(1);const l={col:i,strokeCol:n,strokeWidth:a,alpha:this.alphaMultiplier};const o=s.map((t,e)=>t+r[e]/2);const h=o.map((t,e)=>t-r[e]);t.drawBarsV(e,h,o,r,l)};this.drawHighlight=d=>{r.highlightMembershipArray.forEach(t=>{let[e,s,r]=this.getMappings(t);const[,i,n]=this.getMappings();if(!e)return;const{col:a,strokeCol:l,strokeWidth:o}=this.getPars(t);const h={col:a,strokeCol:l,strokeWidth:o,alpha:1};const c=s.map((t,e)=>t+n[e]/2);const u=c.map((t,e)=>t-r[e]);d.drawBarsV(e,u,c,n,h)})}}get maxWidth(){return Math.min(this.scales.x.intervalWidth,this.scales.y.intervalWidth)}get boundingRects(){const[t,s,r]=this.getMappings();return t.map((t,e)=>[[t-r[e]/2,s[e]-r[e]/2],[t+r[e]/2,s[e]+r[e]/2]])}}e.Squares=i});t("representations/representations",["require","exports","representations/Representation","representations/Bars","representations/Points","representations/Squares"],function(t,e,s,r,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e)});t("scales/Scale",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scale=void 0;class s{constructor(t,e=1,s=.1){this.setLength=t=>{this.lengthOriginal=t;this.offsetOriginal=this.direction===-1?t:0};this.registerData=t=>{this.data=t;return this};this.pctToUnits=t=>{const{length:e,offset:s,direction:r}=this;return typeof t==="number"?s+r*e*t:t.map(t=>s+r*e*t)};this.unitsToPct=t=>{const{length:e}=this;return typeof t==="number"?t/e:t.map(t=>t/e)};this.dataToPlot=t=>{};this.lengthOriginal=t;this.offsetOriginal=this.direction===-1?t:0;this.span=1;this.direction=e;this.expand=s}get length(){return this.lengthOriginal*this.span}get offset(){return this.offsetOriginal}}e.Scale=s});t("scales/ScaleContinuous",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleContinuous=void 0;class r extends s.Scale{constructor(t,e=1,s=false,r=.1){super(t,e,r);this.data=[];this.registerData=t=>{this.data=this.zero?[].concat([0],t):t;return this};this.inRange=t=>{return t>=this.dataMin&&t<=this.dataMax};this.pctToData=t=>{if(t===null)return null;const{dataMin:e,range:s}=this;if(typeof t==="number")return e+t*s;return t.map(t=>{if(t===null)return null;return e+t*s})};this.dataToPct=t=>{if(t===null)return null;const{dataMin:e,range:s}=this;if(typeof t==="number")return(t-e)/s;return t.map(t=>{if(t===null)return null;return(t-e)/s})};this.dataToUnits=t=>{if(t===null)return null;const{dataMin:e,length:s,offset:r,direction:i,range:n}=this;if(typeof t==="number")return r+i*s*(t-e)/n;return t.map(t=>{if(t===null)return null;return r+i*s*((t-e)/n)})};this.unitsToData=t=>{if(t===null)return null;const{dataMin:e,length:s,offset:r,direction:i,range:n}=this;if(typeof t==="number")return e+i*n*(t-r)/s;return t.map(t=>{if(t===null)return null;return e+i*n*((t-r)/s)})};this.zero=s}get dataMin(){const{data:t,expand:e}=this;return this.zero?0:Math.min(...t)-e*(Math.max(...t)-Math.min(...t))}get dataMax(){const{data:t,expand:e}=this;return Math.max(...t)+e*(Math.max(...t)-Math.min(...t))}get range(){return this.dataMax-this.dataMin}}e.ScaleContinuous=r});t("scales/ScaleDiscrete",["require","exports","scales/Scale"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScaleDiscrete=void 0;class r extends s.Scale{constructor(t,e=1,s=.1){super(t,e,s);this.toString=t=>{if(typeof t==="string"||typeof t[0]==="string")return t;return t.length?t.map(t=>`${t}`):`${t}`};this.registerData=t=>{this.data=t;const e=Array.from(new Set([...t]));this.values=typeof e[0]==="number"?e.sort((t,e)=>t-e):e.sort();this.positions=Array.from(Array(this.values.length),(t,e)=>(e+1)/(this.values.length+1));return this};this.dataToUnits=t=>{if(t==null)return null;const{values:e,length:s,direction:r,positions:i,offset:n}=this;const a=this.toString(t);const l=this.toString(e);if(typeof a==="string"){return l.indexOf(a)!==-1?n+r*s*i[l.indexOf(a)]:null}return a.map(t=>l.indexOf(t)!==-1?n+r*s*i[l.indexOf(t)]:null)};this.values=[]}}e.ScaleDiscrete=r});t("scales/AreaScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AreaScaleContinuous=void 0;class r extends s.ScaleContinuous{constructor(t,e=1,s=false){super(t,e,s);this.dataToPlot=t=>{const e=this.dataToUnits(t);return typeof e==="number"?Math.sqrt(e):e.map(t=>Math.sqrt(t))}}get dataMin(){return 0}}e.AreaScaleContinuous=r});t("scales/LengthScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.LengthScaleContinuous=void 0;class r extends s.ScaleContinuous{constructor(t,e=1,s=false){super(t,e,s);this.dataToPlot=t=>{const e=this.dataToUnits(t);return e}}get dataMin(){return 0}}e.LengthScaleContinuous=r});t("scales/XYScaleDiscrete",["require","exports","scales/ScaleDiscrete"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleDiscrete=void 0;class r extends s.ScaleDiscrete{constructor(t,e=1,s=.1,r={lower:.2,upper:.1}){super(t,e,s);this.dataToPlot=t=>{return this.dataToUnits(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=r;this.span=1-r.lower-r.upper}get offset(){return this.offsetOriginal+this.direction*this.lengthOriginal*this.margins.lower}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}get intervalWidth(){return Math.abs(this.dataToPlot(this.values[0])-this.dataToPlot(this.values[1]))}}e.XYScaleDiscrete=r});t("scales/XYScaleContinuous",["require","exports","scales/ScaleContinuous"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.XYScaleContinuous=void 0;class r extends s.ScaleContinuous{constructor(t,e=1,s=false,r=.1,i={lower:.2,upper:.1}){super(t,e,s,r);this.dataToPlot=t=>{return this.dataToUnits(t)};this.plotToData=t=>{return this.unitsToData(t)};this.pctToPlot=t=>{return this.pctToUnits(t)};this.plotToPct=t=>{return this.unitsToPct(t)};this.margins=i;this.span=1-i.lower-i.upper}get offset(){return this.offsetOriginal+this.direction*this.lengthOriginal*this.margins.lower}get plotMin(){return this.pctToUnits(0)}get plotMax(){return this.pctToUnits(1)}}e.XYScaleContinuous=r});t("scales/scales",["require","exports","scales/Scale","scales/ScaleContinuous","scales/ScaleDiscrete","scales/AreaScaleContinuous","scales/LengthScaleContinuous","scales/XYScaleDiscrete","scales/XYScaleContinuous"],function(t,e,s,r,i,n,a,l,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e);h(a,e);h(l,e);h(o,e)});t("auxiliaries/Auxiliary",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Auxiliary=void 0;class s{constructor(){this.registerScales=t=>{this.scales=t;return this};this.draw=(t,...e)=>{};this.drawBase=(t,...e)=>{};this.drawUser=(t,e,...s)=>{}}}e.Auxiliary=s});t("auxiliaries/AxisBox",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisBox=void 0;class r extends s.Auxiliary{constructor(){super(...arguments);this.draw=t=>{const e=this.scales.x.plotMin;const s=this.scales.x.plotMax;const r=this.scales.y.plotMin;const i=this.scales.y.plotMax;t.drawLine([e,s],[r,r]);t.drawLine([e,e],[r,i])};this.drawBase=t=>{this.draw(t)};this.drawHighlight=t=>{this.draw(t)}}}e.AxisBox=r});t("auxiliaries/AxisText",["require","exports","auxiliaries/Auxiliary","functions"],function(t,e,s,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisText=void 0;class i extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=e=>{return this.labels.map(t=>e.context.measureText(t))};this.draw=t=>{const{scales:e,along:s,other:r,breaks:i}=this;const n=Math.min(...[s,r].map(t=>.3*e[t].margins.lower*e[t].length));const a=Array.from(Array(i.length),t=>e[r].plotMin+(s==="x"?5:-5));const l={x:null,y:null};l[s]=i;l[r]=a;if(s==="x"){t.context.textBaseline="top";t.context.textAlign="center"}if(s==="y"){t.context.textBaseline="middle";t.context.textAlign="right"}t.drawText(l.x,l.y,this.labels,n)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.nbreaks=e!==null&&e!==void 0?e:4}get dataBreaks(){var t;return(t=this.scales[this.along].values)!==null&&t!==void 0?t:r.prettyBreaks(this.scales[this.along].data,this.nbreaks)}get breaks(){return this.scales[this.along].dataToPlot(this.dataBreaks)}get labels(){return this.scales[this.along].values?this.scales[this.along].values.map(t=>t.toString()):this.dataBreaks.map(t=>t.toString())}}e.AxisText=i});t("auxiliaries/AxisTitle",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.AxisTitle=void 0;class r extends s.Auxiliary{constructor(t,e){super();this.getLabelMetrics=t=>{return t.context.measureText(this.label)};this.draw=t=>{if(this.label==="_indicator")return;const{scales:e,along:s,other:r}=this;const i=Math.min(...[s,r].map(t=>.4*e[t].margins.lower*e[t].length));const n={x:null,y:null};n[s]=e[s].pctToPlot(.5);n[r]=e[r].pctToPlot(0)+(s==="x"?1:-1)*.85*e[r].margins.lower*e[r].length;const a=this.along==="x"?0:270;t.context.textAlign="center";t.context.textBaseline="middle";t.drawText([n.x],[n.y],[this.label],i,a)};this.drawBase=t=>{this.draw(t)};this.along=t;this.other=t==="x"?"y":"x";this.label=e}}e.AxisTitle=r});t("auxiliaries/HighlightRects",["require","exports","auxiliaries/Auxiliary"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HighlightRects=void 0;class r extends s.Auxiliary{constructor(t){super();this.updateCurrentOrigin=t=>{this.current[0]=t};this.updateCurrentEndpoint=t=>{this.current[1]=t};this.updateLast=()=>{this.last=[this.current[0],this.current[1]];this.empty=false};this.pushLastToPast=()=>{this.past.push([this.last[0],this.last[1]]);this.empty=false};this.clear=()=>{this.last=[[null,null],[null,null]];this.past=[];this.empty=true};this.draw=(t,e)=>{t.drawWindow([e[0][0],e[0][1]],[e[1][0],e[1][1]])};this.drawUser=e=>{const{drag:t,state:s}=this.handlers;if(this.empty){e.drawClear();return}if(!s.inState("none")){e.drawClear();e.drawDim();this.past.forEach(t=>{this.draw(e,t)});this.draw(e,this.last);return}e.drawClear();e.drawDim();this.draw(e,this.last)};this.current=[[null,null],[null,null]];this.last=[[null,null],[null,null]];this.past=[];this.empty=true;this.handlers=t;this.bgDrawn=false}get lastComplete(){return!this.last.flat().some(t=>t===null)}}e.HighlightRects=r});t("auxiliaries/auxiliaries",["require","exports","auxiliaries/Auxiliary","auxiliaries/AxisBox","auxiliaries/AxisText","auxiliaries/AxisTitle","auxiliaries/HighlightRects"],function(t,e,s,r,i,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e);h(a,e)});t("plot/GraphicStack",["require","exports","plot/GraphicLayer"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.GraphicStack=void 0;class s{constructor(t,e,s){this.initialize=()=>{const t=["graphicBase","graphicUser","graphicHighlight"];this.graphicDiv.appendChild(this.graphicContainer);this.graphicContainer.setAttribute("class","graphicContainer");t.forEach(t=>{this[t]=new r.GraphicLayer(this.globals,this.dimensions);this.graphicContainer.appendChild(this[t].canvas)});this.graphicBase.drawBackground()};this.graphicDiv=t;this.graphicContainer=document.createElement("div");this.globals=e;this.dimensions=s;this.initialize()}get width(){if(this.dimensions)return this.dimensions.width;return this.globals.plotWidth}get height(){if(this.dimensions)return this.dimensions.height;return this.globals.plotHeight}}e.GraphicStack=s});t("plot/Plot",["require","exports","functions","auxiliaries/auxiliaries","handlers/handlers","plot/GraphicStack"],function(t,e,l,n,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Plot=void 0;class r extends s.GraphicStack{constructor(t,e,s,r,i){super(e,r,i);this.resize=()=>{const t=["graphicBase","graphicUser","graphicHighlight"];this.scales.x.setLength(this.width);this.scales.y.setLength(this.height);this.graphicContainer.style.width=`${this.width}px`;this.graphicContainer.style.height=`${this.height}px`;t.forEach(t=>this[t].resize())};this.activate=()=>{this.handlers.state.deactivateAll();this.handlers.state.activate(this.id)};this.callChildren=(t,e,...s)=>{const r=this[t];Object.keys(r).forEach(t=>{r[t][e]?r[t][e](...s):null})};this.mapChildren=(t,e,...s)=>{const r=this[t];return Object.keys(r).map(t=>{return r[t][e]?r[t][e](...s):null})};this.getUnique=s=>{const{wranglers:r}=this;const t=Object.keys(r).flatMap(t=>{var e;return(e=r[t][s].extract())!==null&&e!==void 0?e:[]});return Array.from(new Set(t))};this.inSelection=t=>{const{mapChildren:e}=this;const s=e("representations","inSelection",t);return Array.from(new Set(s.flat()))};this.inClickPosition=t=>{const{mapChildren:e}=this;const s=e("representations","atClick",t);return Array.from(new Set(s.flat()))};this.startDrag=()=>{const{marker:t,state:e,drag:s}=this.handlers;const{highlightrects:r}=this.auxiliaries;if(!e.inState("none")&&r.lastComplete){r.pushLastToPast()}r.updateCurrentOrigin(s.start)};this.whileDrag=()=>{const{marker:t,drag:e,state:s}=this.handlers;const{highlightrects:r}=this.auxiliaries;r.updateCurrentEndpoint(e.end);r.updateLast();this.drawUser();t.updateCurrent(this.inSelection([e.start,e.end]),s.membership)};this.endDrag=()=>{const{marker:t,state:e}=this.handlers;const{highlightrects:s}=this.auxiliaries;t.mergeCurrent();if(!e.inState("none")&&s.lastComplete){s.pushLastToPast()}};this.onKeypress=()=>{const{callChildren:t,drawHighlight:e}=this;const{keypress:s}=this.handlers;t("handlers","onKeypress",s.lastPressed);if(this.active){t("representations","onKeypress",s.lastPressed);e()}};this.onKeyRelease=()=>{const{handlers:t,callChildren:e}=this;e("handlers","onKeyRelease",t.keypress.lastPressed);if(this.active){e("representations","onKeyRelease",t.keypress.lastPressed)}};this.onMouseDownAnywhere=()=>{const{marker:t,state:e}=this.handlers;if(e.inState("none")){this.auxiliaries.highlightrects.clear();this.drawUser()}};this.onMouseDownHere=()=>{const{marker:t,click:e,drag:s,state:r}=this.handlers;const{highlightrects:i}=this.auxiliaries;if(r.inState("none")){t.clearCurrent();this.auxiliaries.highlightrects.clear()}r.deactivateAll();this.activate();t.updateCurrent(this.inClickPosition(e.clickLast),r.membership)};this.onDoubleClick=()=>{const{marker:t,drag:e,state:s}=this.handlers;s.activateAll();t.clearAll();this.auxiliaries.highlightrects.clear();this.drawHighlight();this.drawUser();s.deactivateAll()};this.draw=(t,...e)=>{const{representations:s,auxiliaries:r,callChildren:i}=this;const n="draw"+l.capitalize(t);const a="graphic"+l.capitalize(t);if(t!=="user")this[a].drawClear();if(t==="base")this[a].drawBackground();i("representations",n,this[a],...e);i("auxiliaries",n,this[a],...e)};this.drawBase=()=>this.draw("base");this.drawHighlight=()=>this.draw("highlight");this.drawUser=()=>{if(this.active||this.handlers.state.inState("none"))this.draw("user")};this.drawRedraw=()=>{this.drawBase();this.drawHighlight();this.drawUser()};this.initialize=()=>{const{handlers:t,scales:s,callChildren:e,onMouseDownHere:r,onMouseDownAnywhere:i,onDoubleClick:n,onKeypress:a,onKeyRelease:l,drawBase:o,drawHighlight:h,drawUser:c,startDrag:u,whileDrag:d,endDrag:p,graphicContainer:g,graphicDiv:f}=this;Object.keys(s).forEach(t=>{var e;(e=s[t])===null||e===void 0?void 0:e.registerData(this.getUnique(t))});e("representations","registerScales",s);e("auxiliaries","registerScales",s);this.handlers.drag.state=this.handlers.state;f.addEventListener("dblclick",n);f.addEventListener("mousedown",i);g.addEventListener("mousedown",r);t.marker.registerCallbacks([h,h],["updateCurrent","clearAll"]);t.state.registerCallbacks([c],["deactivateAll"]);t.drag.registerCallbacks([u,d,p],["startDrag","whileDrag","endDrag"]);t.keypress.registerCallbacks([a,l,o],["keyPressed","keyReleased","keyPressed"]);o()};this.id=t;this.representations={};this.wranglers={};this.scales={};this.handlers={marker:r.handlers.marker,keypress:r.handlers.keypress,state:r.handlers.state,drag:new a.DragHandler(this.graphicContainer),click:new a.ClickHandler(this.graphicContainer)};this.auxiliaries={axisbox:new n.AxisBox,axistextx:new n.AxisText("x"),axistexy:new n.AxisText("y"),axistitlex:new n.AxisTitle("x",s.get("x")),axistitley:new n.AxisTitle("y",s.get("y")),highlightrects:new n.HighlightRects(this.handlers)}}get active(){return this.handlers.state.isActive(this.id)}}e.Plot=r});t("handlers/ClickHandler",["require","exports","handlers/Handler"],function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ClickHandler=void 0;class r extends s.Handler{constructor(t){super();this.mouseDown=t=>{this.holding=true;this.clickCurrent=[t.offsetX,t.offsetY];this.clickLast=[t.offsetX,t.offsetY];this.notifyAll("mouseDown")};this.mouseUp=t=>{this.holding=false;this.clickCurrent=[null,null];this.notifyAll("mouseUp")};this.container=t;this.holding=false;this.clickCurrent=[null,null];this.clickLast=[null,null];this.actions=["mousedown","mouseup"];this.consequences=["mouseDown","mouseUp"];this.actions.forEach((t,e)=>{this.container.addEventListener(t,t=>this[this.consequences[e]](t))})}}e.ClickHandler=r});t("handlers/handlers",["require","exports","handlers/MarkerHandler","handlers/KeypressHandler","handlers/DragHandler","handlers/StateHandler","handlers/ClickHandler"],function(t,e,s,r,i,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e);h(a,e)});t("plot/ScatterPlot",["require","exports","scales/scales","representations/representations","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ScatterPlot=void 0;class r extends s.Plot{constructor(t,e,s,r,i){super(t,e,s,r,i);this.mapping=s;this.wranglers={wrangler1:new l.Wrangler(r.data,s,r.handlers.marker).extractAsIs(...s.keys())};this.scales=Object.assign({x:new n.XYScaleContinuous(this.width),y:new n.XYScaleContinuous(this.height,-1)},s.get("size")&&{size:new n.AreaScaleContinuous(1)});this.representations={points:new a.Points(this.wranglers.wrangler1)};this.initialize()}}e.ScatterPlot=r});t("plot/BubblePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BubblePlot=void 0;class r extends s.Plot{constructor(t,e,s,r,i){if(!s.has("size"))s.set("size","_indicator");super(t,e,s,r,i);this.wranglers={wrangler1:new o.Wrangler(r.data,s,r.handlers.marker).splitBy("x","y").splitWhat("size").doWithin("by",l.unique).doWithin("what",l.length).assignIndices()};this.scales={x:new n.XYScaleDiscrete(this.width),y:new n.XYScaleDiscrete(this.height,-1),size:new n.AreaScaleContinuous(this.width)};this.representations={points:new a.Points(this.wranglers.wrangler1)};this.initialize()}}e.BubblePlot=r});t("plot/BarPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.BarPlot=void 0;class r extends s.Plot{constructor(t,e,s,r,i){super(t,e,s,r,i);this.mapping=s;this.wranglers={wrangler1:new o.Wrangler(r.data,s,r.handlers.marker).splitBy("x").splitWhat("y").doWithin("by",l.unique).doWithin("what",l.sum).assignIndices()};this.scales={x:new n.XYScaleDiscrete(this.width),y:new n.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new a.Bars(this.wranglers.wrangler1,.8)};this.initialize()}}e.BarPlot=r});t("plot/HistoPlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.HistoPlot=void 0;class r extends s.Plot{constructor(t,e,s,r,i){super(t,e,s,r,i);this.wranglers={wrangler1:new o.Wrangler(r.data,s,r.handlers.marker).splitBy("x").splitWhat("y").doAcross("by",l.bin,10).doWithin("by",l.unique).doWithin("what",l.sum).assignIndices()};this.scales={x:new n.XYScaleContinuous(this.width),y:new n.XYScaleContinuous(this.height,-1,true)};this.representations={bars:new a.Bars(this.wranglers.wrangler1,1)};this.initialize()}}e.HistoPlot=r});t("plot/SquarePlot",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SquarePlot=void 0;class r extends s.Plot{constructor(t,e,s,r,i){if(!s.has("size"))s.set("size","_indicator");super(t,e,s,r,i);this.wranglers={wrangler1:new o.Wrangler(r.data,s,r.handlers.marker).splitBy("x","y").splitWhat("size").doWithin("by",l.unique).doWithin("what",l.sum).assignIndices()};this.scales={x:new n.XYScaleDiscrete(this.width),y:new n.XYScaleDiscrete(this.height,-1),size:new n.LengthScaleContinuous(1)};this.representations={squares:new a.Squares(this.wranglers.wrangler1)};this.initialize()}}e.SquarePlot=r});t("plot/SquareHeatmap",["require","exports","scales/scales","representations/representations","functions","wrangler/Wrangler","plot/Plot"],function(t,e,n,a,l,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.SquareHeatmap=void 0;class r extends s.Plot{constructor(t,e,s,r,i){if(!s.has("size"))s.set("size","_indicator");super(t,e,s,r,i);this.wranglers={wrangler1:new o.Wrangler(r.data,s,r.handlers.marker).splitBy("x","y").splitWhat("size").doAcross("by",l.toPretty,10).doWithin("by",l.unique).doWithin("what",l.sum).assignIndices()};this.scales={x:new n.XYScaleDiscrete(this.width),y:new n.XYScaleDiscrete(this.height,-1),size:new n.LengthScaleContinuous(1)};this.representations={squares:new a.Squares(this.wranglers.wrangler1)};this.initialize()}}e.SquareHeatmap=r});t("plot/plots",["require","exports","plot/ScatterPlot","plot/BubblePlot","plot/BarPlot","plot/HistoPlot","plot/SquarePlot","plot/SquareHeatmap"],function(t,e,s,r,i,n,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e);h(a,e);h(l,e)});t("datastructures",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.plotTypeArray=e.highlightMembershipArray=e.validMembershipArray=e.baseMembershipArray=void 0;const s=[1,2,3,4];e.baseMembershipArray=s;const r=[...s,...s.map(t=>t+128),128];e.validMembershipArray=r;const i=r.filter(t=>t!==1);e.highlightMembershipArray=i;const n=["scatter","bubble","bar","histo","square","squareheat"];e.plotTypeArray=n});t("Mapping",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Mapping=void 0;class s extends Map{constructor(...t){super([...t]);if(!this.has("y"))this.set("y","_indicator")}}e.Mapping=s});t("helppaneltext",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.helpPanelText=void 0;e.helpPanelText=`
        Welcome to Plotscape! <br>
        Try interacting with the plots in the following ways: <br> <br>
        <kbd>Click</kbd> a plot to make it active <br>
        <kbd>+</kbd>/<kbd>-</kbd> to increase/decrease size of objects <br>
        <kbd>[</kbd>/<kbd>]</kbd> to decrease/increase opacity (alpha) of objects <br>
        <kbd>R</kbd> to reset graphical settings of the active plot <br>
        <kbd>Click-and-drag</kbd>/<kbd>click</kbd> to transiently select objects<br>
        <kbd>1</kbd>,<kbd>2</kbd>,<kbd>...</kbd> + <kbd>click-and-drag</kbd> to make a permanent (group) selection <br>
        <kbd>Double-click</kbd> to reset selection
    
        <br>
    `});t("Scene",["require","exports","datastructures","handlers/handlers","plot/plots","helppaneltext"],function(t,e,h,l,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Scene=void 0;class s{constructor(t,e){this.addPlotWrapper=(e,t,s)=>{const{element:r,plotIds:i,plots:n,globals:a}=this;this.globals.nPlots++;const l=h.plotTypeArray.findIndex(t=>t===e);this.nPlotsOfType[l]++;const o=`${e}${this.nPlotsOfType[l]}`;this.plots[o]=new c(e,o,r,t,a,s);i.push(o);a.handlers.state.plotIds.push(o);a.handlers.state.plotsActive.push(false);a.handlers.state.plotContainers.push(this.plots[o].graphicContainer);i.forEach(t=>{n[t].resize();n[t].drawRedraw()});return this};this.element=t;this.nObs=e[Object.keys(e)[0]].length;this.nPlotsOfType=Array(h.plotTypeArray.length).fill(0);this.plots={};this.plotIds=[];this.globals={nPlots:0,scaleFactor:3,data:e,sceneWidth:parseInt(getComputedStyle(t).width,10),sceneHeight:parseInt(getComputedStyle(t).height,10),get plotWidth(){return.85*this.sceneWidth/Math.ceil(this.nPlots/Math.floor(Math.sqrt(this.nPlots)))},get plotHeight(){return.85*this.sceneHeight/Math.floor(Math.sqrt(this.nPlots))},handlers:{marker:new l.MarkerHandler(this.nObs),keypress:new l.KeypressHandler,state:new l.StateHandler}};t.classList.add("graphicDiv");this.globals.handlers.state.keypressHandler=this.globals.handlers.keypress;const s=document.head;const r=document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href="./styles.css";s.appendChild(r);const i=document.createElement("button");const n=document.createElement("div");i.innerText=`?`;i.classList.add("buttonHelp");n.innerHTML=o.helpPanelText;n.classList.add("helpPanel");const a=Math.min(this.globals.sceneWidth,this.globals.sceneHeight)*.05;i.style.width=`${a}px`;i.style.height=`${a}px`;i.style.fontSize=`${.5*a}px`;t.appendChild(n);t.appendChild(i);i.addEventListener("click",t=>{n.classList.toggle("activePanel")})}}e.Scene=s;class c{constructor(t,...e){const s={scatter:r.ScatterPlot,bubble:r.BubblePlot,bar:r.BarPlot,histo:r.HistoPlot,square:r.SquarePlot,squareheat:r.SquareHeatmap};return new s[t](...e)}}});t("main",["require","exports","Scene","plot/Plot","DataFrame","Mapping","functions"],function(t,e,s,r,i,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});h(s,e);h(r,e);h(i,e);h(n,e);h(a,e)});"marker:resolver";function a(e){if(r[e]){return r[e]}else if(r[e+"/index"]){return r[e+"/index"]}else{const t=["exports"];const s=t=>{try{Object.defineProperty(t,"__cjsModule",{value:true});Object.defineProperty(t,"default",{value:require(e)})}catch(t){throw Error(['module "',e,'" not found.'].join(""))}};return{dependencies:t,factory:s}}}const l={};function o(t){if(l[t]){return l[t]}if(t==="exports"){return{}}const e=a(t);if(typeof e.factory!=="function"){return e.factory}l[t]={};const s=e.dependencies.map(t=>o(t));e.factory(...s);const r=s[e.dependencies.indexOf("exports")];l[t]=r["__cjsModule"]?r.default:r;return l[t]}if(i[0]!==null){return o(i[0])}})();